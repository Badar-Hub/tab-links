{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/quasar/src/composables/private/use-cache.js","webpack:///./node_modules/quasar/src/utils/private/date-persian.js","webpack:///./node_modules/quasar/src/components/date/use-datetime.js","webpack:///./node_modules/quasar/src/utils/date.js","webpack:///./node_modules/quasar/src/components/date/QDate.js","webpack:///./node_modules/quasar/src/components/popup-proxy/QPopupProxy.js","webpack:///./node_modules/core-js/modules/es.array.fill.js"],"names":["$","aFunction","toObject","toLength","toString","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","test","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","value","index","result","String","fromCharCode","push","k","v","a","b","length","charAt","FORCED","getSortCompare","comparefn","x","y","target","proto","forced","array","this","call","itemsLength","items","arrayLength","cache","Map","getCache","key","obj","getCacheWithFn","fn","breaks","toJalaali","gy","gm","gd","Object","prototype","getDate","getMonth","getFullYear","d2j","g2d","toGregorian","jy","jm","jd","d2g","j2d","isLeapJalaaliYear","jalCalLeap","jalaaliMonthLength","jump","leap","n","i","bl","jp","Error","div","mod","jalCal","withoutLeap","leapJ","leapG","march","r","jdn","jdn1f","d","j","calendars","useDatetimeProps","modelValue","required","mask","type","locale","calendar","validator","includes","default","landscape","Boolean","color","textColor","square","flat","bordered","readonly","disable","useDatetimeEmits","getDayHash","date","year","pad","month","day","props","$q","editable","computed","tabindex","headerClass","cls","join","getLocale","lang","getCurrentDate","dateOnly","Date","timeFill","jDate","hour","minute","second","millisecond","MILLISECONDS_IN_DAY","MILLISECONDS_IN_HOUR","MILLISECONDS_IN_MINUTE","defaultMask","token","reverseToken","regexStore","getRegexData","dateLocale","days","daysShort","months","monthsShort","map","regexText","replace","match","YY","YYYY","M","MMM","MMMM","D","H","h","m","s","S","A","aa","Z","ZZ","X","substring","res","regex","RegExp","__splitDate","str","defaultModel","timezoneOffset","dateHash","timeHash","assign","langOpts","tzString","stamp","parseInt","isNaN","getHours","getMinutes","getSeconds","getMilliseconds","indexOf","maxDay","slice","formatTimezone","offset","delimeter","sign","absOffset","Math","abs","hours","floor","minutes","getWeekOfYear","thursday","setDate","getDay","firstThursday","ds","getTimezoneOffset","setHours","weekDiff","startOfDate","unit","utc","t","prefix","getDiff","sub","interval","getTime","getDateDiff","subtract","getDayOfYear","getOrdinal","formatter","_","forcedYear","MM","Q","ceil","Qo","Do","DD","DDD","DDDD","dd","dddd","ddd","E","w","ww","HH","hh","mm","ss","SS","SSS","forcedTimezoneOffset","tzOffset","formatDate","val","__forcedYear","__forcedTimezoneOffset","Infinity","text","split","yearsInterval","views","viewIsValid","yearMonthValidator","lineStr","getMonthHash","defineComponent","name","useFormProps","useDarkProps","multiple","range","title","subtitle","defaultYearMonth","yearsInMonthView","events","Array","Function","eventColor","emitImmediately","options","navigationMinYearMonth","navigationMaxYearMonth","noUnset","firstDayOfWeek","Number","todayBtn","minimal","defaultView","emits","setup","lastEmitValue","slots","emit","getCurrentInstance","proxy","isDark","useDark","useCache","useDatetime","formAttrs","useFormAttrs","injectFormInput","useFormInject","blurTargetRef","ref","innerMask","getMask","innerLocale","today","viewModel","getViewModel","view","direction","rtl","monthDirection","yearDirection","startYear","editRange","classes","computedColor","computedTextColor","isImmediate","normalizedModel","isArray","daysModel","filter","decodeString","rangeModel","from","to","getNativeDateFn","model","gDate","encodeObjectFn","daysInModel","reduce","acc","headerTitle","init","pluralDay","valueOf","minSelectedModel","concat","maxSelectedModel","headerSubtitle","dateArrow","iconSet","datetime","arrowLeft","arrowRight","reverse","computedFirstDayOfWeek","daysOfWeek","first","daysInMonth","evtColor","minNav","data","maxNav","navBoundaries","prev","next","daysMap","forEach","entry","hash","rangeMap","hashFrom","hashTo","cur","rangeView","initHash","final","finalHash","fromHash","toHash","viewMonthHash","includeFrom","includeTo","selectionDaysMap","dayHash","eventDaysMap","viewDays","endDay","prevJM","prevJY","len","fill","event","in","selected","unelevated","rangeFrom","rangeTo","editRangeFrom","editRangeTo","left","afterDays","attributes","setToday","toggleDate","setCalendarTo","setView","viewMode","offsetCalendar","descending","goToMonth","goToYear","updateViewModel","setEditingRange","getDefaultViewModel","decoded","setYear","setMonth","monthHash","removeFromModel","addToModel","getShortDate","newHash","nextTick","emitValue","action","getEmitParams","reason","details","min","max","encodeEntry","ranges","updateValue","getHeader","class","Transition","onClick","onKeyup","e","keyCode","QBtn","icon","size","round","getNavigation","label","dir","goTo","boundaries","dense","noCaps","watch","focus","renderViews","Calendar","onDayClick","onMouseover","onDayMouseover","Months","currentYear","isDisabled","content","active","unshift","Years","start","stop","years","dayIndex","dayProps","find","payload","def","hSlot","useAnchorProps","breakpoint","attrs","showing","popupRef","useAnchor","canShow","getType","screen","width","height","onShow","evt","onHide","show","hide","toggle","component","popupProps","cover","maxHeight","QDialog","QMenu","contextMenu","noParentEvent","separateClosePopup","addToUnscopables"],"mappings":"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","file":"js/chunk-21641800.6f19dae5.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aFunction(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort.call(array) : nativeSort.call(array, comparefn);\n\n    var items = [];\n    var arrayLength = toLength(array.length);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) items.push(array[index]);\n    }\n\n    items = internalSort(items, getSortCompare(comparefn));\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","export default function () {\n  const cache = new Map()\n\n  return {\n    getCache: __QUASAR_SSR_SERVER__\n      ? function (_, obj) { return obj }\n      : function (key, obj) {\n        return cache[ key ] === void 0\n          ? (cache[ key ] = obj)\n          : cache[ key ]\n      },\n\n    getCacheWithFn: __QUASAR_SSR_SERVER__\n      ? function (_, fn) { return fn() }\n      : function (key, fn) {\n        return cache[ key ] === void 0\n          ? (cache[ key ] = fn())\n          : cache[ key ]\n      }\n  }\n}\n","// taken from https://github.com/jalaali/jalaali-js\n\n/*\n  Jalaali years starting the 33-year rule.\n*/\nconst breaks = [\n  -61, 9, 38, 199, 426, 686, 756, 818, 1111, 1181, 1210,\n  1635, 2060, 2097, 2192, 2262, 2324, 2394, 2456, 3178\n]\n\n/*\n  Converts a Gregorian date to Jalaali.\n*/\nexport function toJalaali (gy, gm, gd) {\n  if (Object.prototype.toString.call(gy) === '[object Date]') {\n    gd = gy.getDate()\n    gm = gy.getMonth() + 1\n    gy = gy.getFullYear()\n  }\n  return d2j(g2d(gy, gm, gd))\n}\n\n/*\n  Converts a Jalaali date to Gregorian.\n*/\nexport function toGregorian (jy, jm, jd) {\n  return d2g(j2d(jy, jm, jd))\n}\n\n/*\n  Checks whether a Jalaali date is valid or not.\n*/\nexport function isValidJalaaliDate (jy, jm, jd) {\n  return jy >= -61 && jy <= 3177\n          && jm >= 1 && jm <= 12\n          && jd >= 1 && jd <= jalaaliMonthLength(jy, jm)\n}\n\n/*\n  Is this a leap year or not?\n*/\nfunction isLeapJalaaliYear (jy) {\n  return jalCalLeap(jy) === 0\n}\n\n/*\n  Number of days in a given month in a Jalaali year.\n*/\nexport function jalaaliMonthLength (jy, jm) {\n  if (jm <= 6) return 31\n  if (jm <= 11) return 30\n  if (isLeapJalaaliYear(jy)) return 30\n  return 29\n}\n\n/*\n    This function determines if the Jalaali (Persian) year is\n    leap (366-day long) or is the common year (365 days)\n\n    @param jy Jalaali calendar year (-61 to 3177)\n    @returns number of years since the last leap year (0 to 4)\n */\nfunction jalCalLeap (jy) {\n  const bl = breaks.length\n  let\n    jp = breaks[ 0 ],\n    jm,\n    jump,\n    leap,\n    n,\n    i\n\n  if (jy < jp || jy >= breaks[ bl - 1 ]) { throw new Error('Invalid Jalaali year ' + jy) }\n\n  for (i = 1; i < bl; i += 1) {\n    jm = breaks[ i ]\n    jump = jm - jp\n    if (jy < jm) { break }\n    jp = jm\n  }\n  n = jy - jp\n\n  if (jump - n < 6) { n = n - jump + div(jump + 4, 33) * 33 }\n  leap = mod(mod(n + 1, 33) - 1, 4)\n  if (leap === -1) {\n    leap = 4\n  }\n\n  return leap\n}\n\n/*\n  This function determines if the Jalaali (Persian) year is\n  leap (366-day long) or is the common year (365 days), and\n  finds the day in March (Gregorian calendar) of the first\n  day of the Jalaali year (jy).\n\n  @param jy Jalaali calendar year (-61 to 3177)\n  @param withoutLeap when don't need leap (true or false) default is false\n  @return\n    leap: number of years since the last leap year (0 to 4)\n    gy: Gregorian year of the beginning of Jalaali year\n    march: the March day of Farvardin the 1st (1st day of jy)\n  @see: http://www.astro.uni.torun.pl/~kb/Papers/EMP/PersianC-EMP.htm\n  @see: http://www.fourmilab.ch/documents/calendar/\n*/\nfunction jalCal (jy, withoutLeap) {\n  const\n    bl = breaks.length,\n    gy = jy + 621\n  let\n    leapJ = -14,\n    jp = breaks[ 0 ],\n    jm,\n    jump,\n    leap,\n    n,\n    i\n\n  if (jy < jp || jy >= breaks[ bl - 1 ]) { throw new Error('Invalid Jalaali year ' + jy) }\n\n  // Find the limiting years for the Jalaali year jy.\n  for (i = 1; i < bl; i += 1) {\n    jm = breaks[ i ]\n    jump = jm - jp\n    if (jy < jm) { break }\n    leapJ = leapJ + div(jump, 33) * 8 + div(mod(jump, 33), 4)\n    jp = jm\n  }\n  n = jy - jp\n\n  // Find the number of leap years from AD 621 to the beginning\n  // of the current Jalaali year in the Persian calendar.\n  leapJ = leapJ + div(n, 33) * 8 + div(mod(n, 33) + 3, 4)\n  if (mod(jump, 33) === 4 && jump - n === 4) { leapJ += 1 }\n\n  // And the same in the Gregorian calendar (until the year gy).\n  const leapG = div(gy, 4) - div((div(gy, 100) + 1) * 3, 4) - 150\n\n  // Determine the Gregorian date of Farvardin the 1st.\n  const march = 20 + leapJ - leapG\n\n  // Find how many years have passed since the last leap year.\n  if (!withoutLeap) {\n    if (jump - n < 6) { n = n - jump + div(jump + 4, 33) * 33 }\n    leap = mod(mod(n + 1, 33) - 1, 4)\n    if (leap === -1) {\n      leap = 4\n    }\n  }\n\n  return {\n    leap: leap,\n    gy: gy,\n    march: march\n  }\n}\n\n/*\n  Converts a date of the Jalaali calendar to the Julian Day number.\n\n  @param jy Jalaali year (1 to 3100)\n  @param jm Jalaali month (1 to 12)\n  @param jd Jalaali day (1 to 29/31)\n  @return Julian Day number\n*/\nfunction j2d (jy, jm, jd) {\n  const r = jalCal(jy, true)\n  return g2d(r.gy, 3, r.march) + (jm - 1) * 31 - div(jm, 7) * (jm - 7) + jd - 1\n}\n\n/*\n  Converts the Julian Day number to a date in the Jalaali calendar.\n\n  @param jdn Julian Day number\n  @return\n    jy: Jalaali year (1 to 3100)\n    jm: Jalaali month (1 to 12)\n    jd: Jalaali day (1 to 29/31)\n*/\nfunction d2j (jdn) {\n  const gy = d2g(jdn).gy // Calculate Gregorian year (gy).\n  let\n    jy = gy - 621,\n    jd,\n    jm,\n    k\n  const\n    r = jalCal(jy, false),\n    jdn1f = g2d(gy, 3, r.march)\n\n  // Find number of days that passed since 1 Farvardin.\n  k = jdn - jdn1f\n  if (k >= 0) {\n    if (k <= 185) {\n      // The first 6 months.\n      jm = 1 + div(k, 31)\n      jd = mod(k, 31) + 1\n      return {\n        jy: jy,\n        jm: jm,\n        jd: jd\n      }\n    }\n    else {\n      // The remaining months.\n      k -= 186\n    }\n  }\n  else {\n    // Previous Jalaali year.\n    jy -= 1\n    k += 179\n    if (r.leap === 1) { k += 1 }\n  }\n  jm = 7 + div(k, 30)\n  jd = mod(k, 30) + 1\n  return {\n    jy: jy,\n    jm: jm,\n    jd: jd\n  }\n}\n\n/*\n  Calculates the Julian Day number from Gregorian or Julian\n  calendar dates. This integer number corresponds to the noon of\n  the date (i.e. 12 hours of Universal Time).\n  The procedure was tested to be good since 1 March, -100100 (of both\n  calendars) up to a few million years into the future.\n\n  @param gy Calendar year (years BC numbered 0, -1, -2, ...)\n  @param gm Calendar month (1 to 12)\n  @param gd Calendar day of the month (1 to 28/29/30/31)\n  @return Julian Day number\n*/\nfunction g2d (gy, gm, gd) {\n  let d = div((gy + div(gm - 8, 6) + 100100) * 1461, 4)\n      + div(153 * mod(gm + 9, 12) + 2, 5)\n      + gd - 34840408\n  d = d - div(div(gy + 100100 + div(gm - 8, 6), 100) * 3, 4) + 752\n  return d\n}\n\n/*\n  Calculates Gregorian and Julian calendar dates from the Julian Day number\n  (jdn) for the period since jdn=-34839655 (i.e. the year -100100 of both\n  calendars) to some millions years ahead of the present.\n\n  @param jdn Julian Day number\n  @return\n    gy: Calendar year (years BC numbered 0, -1, -2, ...)\n    gm: Calendar month (1 to 12)\n    gd: Calendar day of the month M (1 to 28/29/30/31)\n*/\nfunction d2g (jdn) {\n  let j = 4 * jdn + 139361631\n  j = j + div(div(4 * jdn + 183187720, 146097) * 3, 4) * 4 - 3908\n  const\n    i = div(mod(j, 1461), 4) * 5 + 308,\n    gd = div(mod(i, 153), 5) + 1,\n    gm = mod(div(i, 153), 12) + 1,\n    gy = div(j, 1461) - 100100 + div(8 - gm, 6)\n  return {\n    gy: gy,\n    gm: gm,\n    gd: gd\n  }\n}\n\n/*\n  Utility helper functions.\n*/\n\nfunction div (a, b) {\n  return ~~(a / b)\n}\n\nfunction mod (a, b) {\n  return a - ~~(a / b) * b\n}\n","import { computed } from 'vue'\n\nimport { toJalaali } from '../../utils/private/date-persian.js'\nimport { pad } from '../../utils/format.js'\n\nconst calendars = [ 'gregorian', 'persian' ]\n\nexport const useDatetimeProps = {\n  modelValue: {\n    required: true\n  },\n\n  mask: {\n    type: String\n  },\n  locale: Object,\n\n  calendar: {\n    type: String,\n    validator: v => calendars.includes(v),\n    default: 'gregorian'\n  },\n\n  landscape: Boolean,\n\n  color: String,\n  textColor: String,\n\n  square: Boolean,\n  flat: Boolean,\n  bordered: Boolean,\n\n  readonly: Boolean,\n  disable: Boolean\n}\n\nexport const useDatetimeEmits = [ 'update:modelValue' ]\n\nexport function getDayHash (date) {\n  return date.year + '/' + pad(date.month) + '/' + pad(date.day)\n}\n\nexport default function (props, $q) {\n  const editable = computed(() => {\n    return props.disable !== true && props.readonly !== true\n  })\n\n  const tabindex = computed(() => {\n    return props.editable === true ? 0 : -1\n  })\n\n  const headerClass = computed(() => {\n    const cls = []\n    props.color !== void 0 && cls.push(`bg-${ props.color }`)\n    props.textColor !== void 0 && cls.push(`text-${ props.textColor }`)\n    return cls.join(' ')\n  })\n\n  function getLocale () {\n    return props.locale || $q.lang.date\n  }\n\n  function getCurrentDate (dateOnly) {\n    const d = new Date()\n    const timeFill = dateOnly === true ? null : 0\n\n    if (props.calendar === 'persian') {\n      const jDate = toJalaali(d)\n      return {\n        year: jDate.jy,\n        month: jDate.jm,\n        day: jDate.jd\n      }\n    }\n\n    return {\n      year: d.getFullYear(),\n      month: d.getMonth() + 1,\n      day: d.getDate(),\n      hour: timeFill,\n      minute: timeFill,\n      second: timeFill,\n      millisecond: timeFill\n    }\n  }\n\n  return {\n    editable,\n    tabindex,\n    headerClass,\n\n    getLocale,\n    getCurrentDate\n  }\n}\n","/* eslint no-fallthrough: 0 */\n\nimport { isDate } from './private/is.js'\nimport { pad, capitalize } from './format.js'\nimport { jalaaliMonthLength } from './private/date-persian.js'\nimport lang from '../lang.js'\n\nconst\n  MILLISECONDS_IN_DAY = 86400000,\n  MILLISECONDS_IN_HOUR = 3600000,\n  MILLISECONDS_IN_MINUTE = 60000,\n  defaultMask = 'YYYY-MM-DDTHH:mm:ss.SSSZ',\n  token = /\\[((?:[^\\]\\\\]|\\\\]|\\\\)*)\\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,\n  reverseToken = /(\\[[^\\]]*\\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\\s${}()|\\\\]+)/g,\n  regexStore = {}\n\nfunction getRegexData (mask, dateLocale) {\n  const\n    days = '(' + dateLocale.days.join('|') + ')',\n    key = mask + days\n\n  if (regexStore[ key ] !== void 0) {\n    return regexStore[ key ]\n  }\n\n  const\n    daysShort = '(' + dateLocale.daysShort.join('|') + ')',\n    months = '(' + dateLocale.months.join('|') + ')',\n    monthsShort = '(' + dateLocale.monthsShort.join('|') + ')'\n\n  const map = {}\n  let index = 0\n\n  const regexText = mask.replace(reverseToken, match => {\n    index++\n    switch (match) {\n      case 'YY':\n        map.YY = index\n        return '(-?\\\\d{1,2})'\n      case 'YYYY':\n        map.YYYY = index\n        return '(-?\\\\d{1,4})'\n      case 'M':\n        map.M = index\n        return '(\\\\d{1,2})'\n      case 'MM':\n        map.M = index // bumping to M\n        return '(\\\\d{2})'\n      case 'MMM':\n        map.MMM = index\n        return monthsShort\n      case 'MMMM':\n        map.MMMM = index\n        return months\n      case 'D':\n        map.D = index\n        return '(\\\\d{1,2})'\n      case 'Do':\n        map.D = index++ // bumping to D\n        return '(\\\\d{1,2}(st|nd|rd|th))'\n      case 'DD':\n        map.D = index // bumping to D\n        return '(\\\\d{2})'\n      case 'H':\n        map.H = index\n        return '(\\\\d{1,2})'\n      case 'HH':\n        map.H = index // bumping to H\n        return '(\\\\d{2})'\n      case 'h':\n        map.h = index\n        return '(\\\\d{1,2})'\n      case 'hh':\n        map.h = index // bumping to h\n        return '(\\\\d{2})'\n      case 'm':\n        map.m = index\n        return '(\\\\d{1,2})'\n      case 'mm':\n        map.m = index // bumping to m\n        return '(\\\\d{2})'\n      case 's':\n        map.s = index\n        return '(\\\\d{1,2})'\n      case 'ss':\n        map.s = index // bumping to s\n        return '(\\\\d{2})'\n      case 'S':\n        map.S = index\n        return '(\\\\d{1})'\n      case 'SS':\n        map.S = index // bump to S\n        return '(\\\\d{2})'\n      case 'SSS':\n        map.S = index // bump to S\n        return '(\\\\d{3})'\n      case 'A':\n        map.A = index\n        return '(AM|PM)'\n      case 'a':\n        map.a = index\n        return '(am|pm)'\n      case 'aa':\n        map.aa = index\n        return '(a\\\\.m\\\\.|p\\\\.m\\\\.)'\n\n      case 'ddd':\n        return daysShort\n      case 'dddd':\n        return days\n      case 'Q':\n      case 'd':\n      case 'E':\n        return '(\\\\d{1})'\n      case 'Qo':\n        return '(1st|2nd|3rd|4th)'\n      case 'DDD':\n      case 'DDDD':\n        return '(\\\\d{1,3})'\n      case 'w':\n        return '(\\\\d{1,2})'\n      case 'ww':\n        return '(\\\\d{2})'\n\n      case 'Z': // to split: (?:(Z)()()|([+-])?(\\\\d{2}):?(\\\\d{2}))\n        map.Z = index\n        return '(Z|[+-]\\\\d{2}:\\\\d{2})'\n      case 'ZZ':\n        map.ZZ = index\n        return '(Z|[+-]\\\\d{2}\\\\d{2})'\n\n      case 'X':\n        map.X = index\n        return '(-?\\\\d+)'\n      case 'x':\n        map.x = index\n        return '(-?\\\\d{4,})'\n\n      default:\n        index--\n        if (match[ 0 ] === '[') {\n          match = match.substring(1, match.length - 1)\n        }\n        return match.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n    }\n  })\n\n  const res = { map, regex: new RegExp('^' + regexText) }\n  regexStore[ key ] = res\n\n  return res\n}\n\nexport function extractDate (str, mask, dateLocale) {\n  const d = __splitDate(str, mask, dateLocale)\n\n  const date = new Date(\n    d.year,\n    d.month === null ? null : d.month - 1,\n    d.day,\n    d.hour,\n    d.minute,\n    d.second,\n    d.millisecond\n  )\n\n  const tzOffset = date.getTimezoneOffset()\n\n  return d.timezoneOffset === null || d.timezoneOffset === tzOffset\n    ? date\n    : getChange(date, { minutes: d.timezoneOffset - tzOffset }, true)\n}\n\nexport function __splitDate (str, mask, dateLocale, calendar, defaultModel) {\n  const date = {\n    year: null,\n    month: null,\n    day: null,\n    hour: null,\n    minute: null,\n    second: null,\n    millisecond: null,\n    timezoneOffset: null,\n    dateHash: null,\n    timeHash: null\n  }\n\n  defaultModel !== void 0 && Object.assign(date, defaultModel)\n\n  if (\n    str === void 0\n    || str === null\n    || str === ''\n    || typeof str !== 'string'\n  ) {\n    return date\n  }\n\n  if (mask === void 0) {\n    mask = defaultMask\n  }\n\n  const\n    langOpts = dateLocale !== void 0 ? dateLocale : lang.props.date,\n    months = langOpts.months,\n    monthsShort = langOpts.monthsShort\n\n  const { regex, map } = getRegexData(mask, langOpts)\n\n  const match = str.match(regex)\n\n  if (match === null) {\n    return date\n  }\n\n  let tzString = ''\n\n  if (map.X !== void 0 || map.x !== void 0) {\n    const stamp = parseInt(match[ map.X !== void 0 ? map.X : map.x ], 10)\n\n    if (isNaN(stamp) === true || stamp < 0) {\n      return date\n    }\n\n    const d = new Date(stamp * (map.X !== void 0 ? 1000 : 1))\n\n    date.year = d.getFullYear()\n    date.month = d.getMonth() + 1\n    date.day = d.getDate()\n    date.hour = d.getHours()\n    date.minute = d.getMinutes()\n    date.second = d.getSeconds()\n    date.millisecond = d.getMilliseconds()\n  }\n  else {\n    if (map.YYYY !== void 0) {\n      date.year = parseInt(match[ map.YYYY ], 10)\n    }\n    else if (map.YY !== void 0) {\n      const y = parseInt(match[ map.YY ], 10)\n      date.year = y < 0 ? y : 2000 + y\n    }\n\n    if (map.M !== void 0) {\n      date.month = parseInt(match[ map.M ], 10)\n      if (date.month < 1 || date.month > 12) {\n        return date\n      }\n    }\n    else if (map.MMM !== void 0) {\n      date.month = monthsShort.indexOf(match[ map.MMM ]) + 1\n    }\n    else if (map.MMMM !== void 0) {\n      date.month = months.indexOf(match[ map.MMMM ]) + 1\n    }\n\n    if (map.D !== void 0) {\n      date.day = parseInt(match[ map.D ], 10)\n\n      if (date.year === null || date.month === null || date.day < 1) {\n        return date\n      }\n\n      const maxDay = calendar !== 'persian'\n        ? (new Date(date.year, date.month, 0)).getDate()\n        : jalaaliMonthLength(date.year, date.month)\n\n      if (date.day > maxDay) {\n        return date\n      }\n    }\n\n    if (map.H !== void 0) {\n      date.hour = parseInt(match[ map.H ], 10) % 24\n    }\n    else if (map.h !== void 0) {\n      date.hour = parseInt(match[ map.h ], 10) % 12\n      if (\n        (map.A && match[ map.A ] === 'PM')\n        || (map.a && match[ map.a ] === 'pm')\n        || (map.aa && match[ map.aa ] === 'p.m.')\n      ) {\n        date.hour += 12\n      }\n      date.hour = date.hour % 24\n    }\n\n    if (map.m !== void 0) {\n      date.minute = parseInt(match[ map.m ], 10) % 60\n    }\n\n    if (map.s !== void 0) {\n      date.second = parseInt(match[ map.s ], 10) % 60\n    }\n\n    if (map.S !== void 0) {\n      date.millisecond = parseInt(match[ map.S ], 10) * 10 ** (3 - match[ map.S ].length)\n    }\n\n    if (map.Z !== void 0 || map.ZZ !== void 0) {\n      tzString = (map.Z !== void 0 ? match[ map.Z ].replace(':', '') : match[ map.ZZ ])\n      date.timezoneOffset = (tzString[ 0 ] === '+' ? -1 : 1) * (60 * tzString.slice(1, 3) + 1 * tzString.slice(3, 5))\n    }\n  }\n\n  date.dateHash = date.year + '/' + pad(date.month) + '/' + pad(date.day)\n  date.timeHash = pad(date.hour) + ':' + pad(date.minute) + ':' + pad(date.second) + tzString\n\n  return date\n}\n\nfunction formatTimezone (offset, delimeter = '') {\n  const\n    sign = offset > 0 ? '-' : '+',\n    absOffset = Math.abs(offset),\n    hours = Math.floor(absOffset / 60),\n    minutes = absOffset % 60\n\n  return sign + pad(hours) + delimeter + pad(minutes)\n}\n\nfunction setMonth (date, newMonth /* 1-based */) {\n  const\n    test = new Date(date.getFullYear(), newMonth, 0, 0, 0, 0, 0),\n    days = test.getDate()\n\n  date.setMonth(newMonth - 1, Math.min(days, date.getDate()))\n}\n\nfunction getChange (date, mod, add) {\n  const\n    t = new Date(date),\n    sign = (add ? 1 : -1)\n\n  Object.keys(mod).forEach(key => {\n    if (key === 'months') {\n      setMonth(t, t.getMonth() + 1 + sign * mod.months)\n      return\n    }\n\n    const op = key === 'years'\n      ? 'FullYear'\n      : capitalize(key === 'days' ? 'date' : key)\n    t[ `set${ op }` ](t[ `get${ op }` ]() + sign * mod[ key ])\n  })\n  return t\n}\n\nexport function isValid (date) {\n  return typeof date === 'number'\n    ? true\n    : isNaN(Date.parse(date)) === false\n}\n\nexport function buildDate (mod, utc) {\n  return adjustDate(new Date(), mod, utc)\n}\n\nexport function getDayOfWeek (date) {\n  const dow = new Date(date).getDay()\n  return dow === 0 ? 7 : dow\n}\n\nexport function getWeekOfYear (date) {\n  // Remove time components of date\n  const thursday = new Date(date.getFullYear(), date.getMonth(), date.getDate())\n\n  // Change date to Thursday same week\n  thursday.setDate(thursday.getDate() - ((thursday.getDay() + 6) % 7) + 3)\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  const firstThursday = new Date(thursday.getFullYear(), 0, 4)\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3)\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  const ds = thursday.getTimezoneOffset() - firstThursday.getTimezoneOffset()\n  thursday.setHours(thursday.getHours() - ds)\n\n  // Number of weeks between target Thursday and first Thursday\n  const weekDiff = (thursday - firstThursday) / (MILLISECONDS_IN_DAY * 7)\n  return 1 + Math.floor(weekDiff)\n}\n\nfunction getDayIdentifier (date) {\n  return date.getFullYear() * 10000 + date.getMonth() * 100 + date.getDate()\n}\n\nfunction getDateIdentifier (date, onlyDate /* = false */) {\n  const d = new Date(date)\n  return onlyDate === true ? getDayIdentifier(d) : d.getTime()\n}\n\nexport function isBetweenDates (date, from, to, opts = {}) {\n  const\n    d1 = getDateIdentifier(from, opts.onlyDate),\n    d2 = getDateIdentifier(to, opts.onlyDate),\n    cur = getDateIdentifier(date, opts.onlyDate)\n\n  return (cur > d1 || (opts.inclusiveFrom === true && cur === d1))\n    && (cur < d2 || (opts.inclusiveTo === true && cur === d2))\n}\n\nexport function addToDate (date, mod) {\n  return getChange(date, mod, true)\n}\nexport function subtractFromDate (date, mod) {\n  return getChange(date, mod, false)\n}\n\nexport function adjustDate (date, mod, utc) {\n  const\n    t = new Date(date),\n    prefix = `set${ utc === true ? 'UTC' : '' }`\n\n  Object.keys(mod).forEach(key => {\n    if (key === 'month') {\n      setMonth(t, mod.month)\n      return\n    }\n\n    const op = key === 'year'\n      ? 'FullYear'\n      : key.charAt(0).toUpperCase() + key.slice(1)\n    t[ `${ prefix }${ op }` ](mod[ key ])\n  })\n\n  return t\n}\n\nexport function startOfDate (date, unit, utc) {\n  const\n    t = new Date(date),\n    prefix = `set${ utc === true ? 'UTC' : '' }`\n\n  switch (unit) {\n    case 'year':\n      t[ `${ prefix }Month` ](0)\n    case 'month':\n      t[ `${ prefix }Date` ](1)\n    case 'day':\n      t[ `${ prefix }Hours` ](0)\n    case 'hour':\n      t[ `${ prefix }Minutes` ](0)\n    case 'minute':\n      t[ `${ prefix }Seconds` ](0)\n    case 'second':\n      t[ `${ prefix }Milliseconds` ](0)\n  }\n  return t\n}\n\nexport function endOfDate (date, unit, utc) {\n  const\n    t = new Date(date),\n    prefix = `set${ utc === true ? 'UTC' : '' }`\n\n  switch (unit) {\n    case 'year':\n      t[ `${ prefix }Month` ](11)\n    case 'month':\n      t[ `${ prefix }Date` ](daysInMonth(t))\n    case 'day':\n      t[ `${ prefix }Hours` ](23)\n    case 'hour':\n      t[ `${ prefix }Minutes` ](59)\n    case 'minute':\n      t[ `${ prefix }Seconds` ](59)\n    case 'second':\n      t[ `${ prefix }Milliseconds` ](999)\n  }\n  return t\n}\n\nexport function getMaxDate (date /* , ...args */) {\n  let t = new Date(date)\n  Array.prototype.slice.call(arguments, 1).forEach(d => {\n    t = Math.max(t, new Date(d))\n  })\n  return t\n}\n\nexport function getMinDate (date /*, ...args */) {\n  let t = new Date(date)\n  Array.prototype.slice.call(arguments, 1).forEach(d => {\n    t = Math.min(t, new Date(d))\n  })\n  return t\n}\n\nfunction getDiff (t, sub, interval) {\n  return (\n    (t.getTime() - t.getTimezoneOffset() * MILLISECONDS_IN_MINUTE)\n    - (sub.getTime() - sub.getTimezoneOffset() * MILLISECONDS_IN_MINUTE)\n  ) / interval\n}\n\nexport function getDateDiff (date, subtract, unit = 'days') {\n  const\n    t = new Date(date),\n    sub = new Date(subtract)\n\n  switch (unit) {\n    case 'years':\n      return (t.getFullYear() - sub.getFullYear())\n\n    case 'months':\n      return (t.getFullYear() - sub.getFullYear()) * 12 + t.getMonth() - sub.getMonth()\n\n    case 'days':\n      return getDiff(startOfDate(t, 'day'), startOfDate(sub, 'day'), MILLISECONDS_IN_DAY)\n\n    case 'hours':\n      return getDiff(startOfDate(t, 'hour'), startOfDate(sub, 'hour'), MILLISECONDS_IN_HOUR)\n\n    case 'minutes':\n      return getDiff(startOfDate(t, 'minute'), startOfDate(sub, 'minute'), MILLISECONDS_IN_MINUTE)\n\n    case 'seconds':\n      return getDiff(startOfDate(t, 'second'), startOfDate(sub, 'second'), 1000)\n  }\n}\n\nexport function getDayOfYear (date) {\n  return getDateDiff(date, startOfDate(date, 'year'), 'days') + 1\n}\n\nexport function inferDateFormat (date) {\n  return isDate(date) === true\n    ? 'date'\n    : (typeof date === 'number' ? 'number' : 'string')\n}\n\nexport function getDateBetween (date, min, max) {\n  const t = new Date(date)\n\n  if (min) {\n    const low = new Date(min)\n    if (t < low) {\n      return low\n    }\n  }\n\n  if (max) {\n    const high = new Date(max)\n    if (t > high) {\n      return high\n    }\n  }\n\n  return t\n}\n\nexport function isSameDate (date, date2, unit) {\n  const\n    t = new Date(date),\n    d = new Date(date2)\n\n  if (unit === void 0) {\n    return t.getTime() === d.getTime()\n  }\n\n  switch (unit) {\n    case 'second':\n      if (t.getSeconds() !== d.getSeconds()) {\n        return false\n      }\n    case 'minute': // intentional fall-through\n      if (t.getMinutes() !== d.getMinutes()) {\n        return false\n      }\n    case 'hour': // intentional fall-through\n      if (t.getHours() !== d.getHours()) {\n        return false\n      }\n    case 'day': // intentional fall-through\n      if (t.getDate() !== d.getDate()) {\n        return false\n      }\n    case 'month': // intentional fall-through\n      if (t.getMonth() !== d.getMonth()) {\n        return false\n      }\n    case 'year': // intentional fall-through\n      if (t.getFullYear() !== d.getFullYear()) {\n        return false\n      }\n      break\n    default:\n      throw new Error(`date isSameDate unknown unit ${ unit }`)\n  }\n\n  return true\n}\n\nexport function daysInMonth (date) {\n  return (new Date(date.getFullYear(), date.getMonth() + 1, 0)).getDate()\n}\n\nfunction getOrdinal (n) {\n  if (n >= 11 && n <= 13) {\n    return `${ n }th`\n  }\n  switch (n % 10) {\n    case 1: return `${ n }st`\n    case 2: return `${ n }nd`\n    case 3: return `${ n }rd`\n  }\n  return `${ n }th`\n}\n\nconst formatter = {\n  // Year: 00, 01, ..., 99\n  YY (date, _, forcedYear) {\n    // workaround for < 1900 with new Date()\n    const y = this.YYYY(date, _, forcedYear) % 100\n    return y > 0\n      ? pad(y)\n      : '-' + pad(Math.abs(y))\n  },\n\n  // Year: 1900, 1901, ..., 2099\n  YYYY (date, _, forcedYear) {\n    // workaround for < 1900 with new Date()\n    return forcedYear !== void 0 && forcedYear !== null\n      ? forcedYear\n      : date.getFullYear()\n  },\n\n  // Month: 1, 2, ..., 12\n  M (date) {\n    return date.getMonth() + 1\n  },\n\n  // Month: 01, 02, ..., 12\n  MM (date) {\n    return pad(date.getMonth() + 1)\n  },\n\n  // Month Short Name: Jan, Feb, ...\n  MMM (date, dateLocale) {\n    return dateLocale.monthsShort[ date.getMonth() ]\n  },\n\n  // Month Name: January, February, ...\n  MMMM (date, dateLocale) {\n    return dateLocale.months[ date.getMonth() ]\n  },\n\n  // Quarter: 1, 2, 3, 4\n  Q (date) {\n    return Math.ceil((date.getMonth() + 1) / 3)\n  },\n\n  // Quarter: 1st, 2nd, 3rd, 4th\n  Qo (date) {\n    return getOrdinal(this.Q(date))\n  },\n\n  // Day of month: 1, 2, ..., 31\n  D (date) {\n    return date.getDate()\n  },\n\n  // Day of month: 1st, 2nd, ..., 31st\n  Do (date) {\n    return getOrdinal(date.getDate())\n  },\n\n  // Day of month: 01, 02, ..., 31\n  DD (date) {\n    return pad(date.getDate())\n  },\n\n  // Day of year: 1, 2, ..., 366\n  DDD (date) {\n    return getDayOfYear(date)\n  },\n\n  // Day of year: 001, 002, ..., 366\n  DDDD (date) {\n    return pad(getDayOfYear(date), 3)\n  },\n\n  // Day of week: 0, 1, ..., 6\n  d (date) {\n    return date.getDay()\n  },\n\n  // Day of week: Su, Mo, ...\n  dd (date, dateLocale) {\n    return this.dddd(date, dateLocale).slice(0, 2)\n  },\n\n  // Day of week: Sun, Mon, ...\n  ddd (date, dateLocale) {\n    return dateLocale.daysShort[ date.getDay() ]\n  },\n\n  // Day of week: Sunday, Monday, ...\n  dddd (date, dateLocale) {\n    return dateLocale.days[ date.getDay() ]\n  },\n\n  // Day of ISO week: 1, 2, ..., 7\n  E (date) {\n    return date.getDay() || 7\n  },\n\n  // Week of Year: 1 2 ... 52 53\n  w (date) {\n    return getWeekOfYear(date)\n  },\n\n  // Week of Year: 01 02 ... 52 53\n  ww (date) {\n    return pad(getWeekOfYear(date))\n  },\n\n  // Hour: 0, 1, ... 23\n  H (date) {\n    return date.getHours()\n  },\n\n  // Hour: 00, 01, ..., 23\n  HH (date) {\n    return pad(date.getHours())\n  },\n\n  // Hour: 1, 2, ..., 12\n  h (date) {\n    const hours = date.getHours()\n    if (hours === 0) {\n      return 12\n    }\n    if (hours > 12) {\n      return hours % 12\n    }\n    return hours\n  },\n\n  // Hour: 01, 02, ..., 12\n  hh (date) {\n    return pad(this.h(date))\n  },\n\n  // Minute: 0, 1, ..., 59\n  m (date) {\n    return date.getMinutes()\n  },\n\n  // Minute: 00, 01, ..., 59\n  mm (date) {\n    return pad(date.getMinutes())\n  },\n\n  // Second: 0, 1, ..., 59\n  s (date) {\n    return date.getSeconds()\n  },\n\n  // Second: 00, 01, ..., 59\n  ss (date) {\n    return pad(date.getSeconds())\n  },\n\n  // 1/10 of second: 0, 1, ..., 9\n  S (date) {\n    return Math.floor(date.getMilliseconds() / 100)\n  },\n\n  // 1/100 of second: 00, 01, ..., 99\n  SS (date) {\n    return pad(Math.floor(date.getMilliseconds() / 10))\n  },\n\n  // Millisecond: 000, 001, ..., 999\n  SSS (date) {\n    return pad(date.getMilliseconds(), 3)\n  },\n\n  // Meridiem: AM, PM\n  A (date) {\n    return this.H(date) < 12 ? 'AM' : 'PM'\n  },\n\n  // Meridiem: am, pm\n  a (date) {\n    return this.H(date) < 12 ? 'am' : 'pm'\n  },\n\n  // Meridiem: a.m., p.m.\n  aa (date) {\n    return this.H(date) < 12 ? 'a.m.' : 'p.m.'\n  },\n\n  // Timezone: -01:00, +00:00, ... +12:00\n  Z (date, dateLocale, forcedYear, forcedTimezoneOffset) {\n    const tzOffset = forcedTimezoneOffset === void 0 || forcedTimezoneOffset === null\n      ? date.getTimezoneOffset()\n      : forcedTimezoneOffset\n\n    return formatTimezone(tzOffset, ':')\n  },\n\n  // Timezone: -0100, +0000, ... +1200\n  ZZ (date, dateLocale, forcedYear, forcedTimezoneOffset) {\n    const tzOffset = forcedTimezoneOffset === void 0 || forcedTimezoneOffset === null\n      ? date.getTimezoneOffset()\n      : forcedTimezoneOffset\n\n    return formatTimezone(tzOffset)\n  },\n\n  // Seconds timestamp: 512969520\n  X (date) {\n    return Math.floor(date.getTime() / 1000)\n  },\n\n  // Milliseconds timestamp: 512969520900\n  x (date) {\n    return date.getTime()\n  }\n}\n\nexport function formatDate (val, mask, dateLocale, __forcedYear, __forcedTimezoneOffset) {\n  if (\n    (val !== 0 && !val)\n    || val === Infinity\n    || val === -Infinity\n  ) {\n    return\n  }\n\n  const date = new Date(val)\n\n  if (isNaN(date)) {\n    return\n  }\n\n  if (mask === void 0) {\n    mask = defaultMask\n  }\n\n  const locale = dateLocale !== void 0\n    ? dateLocale\n    : lang.props.date\n\n  return mask.replace(\n    token,\n    (match, text) => (\n      match in formatter\n        ? formatter[ match ](date, locale, __forcedYear, __forcedTimezoneOffset)\n        : (text === void 0 ? match : text.split('\\\\]').join(']'))\n    )\n  )\n}\n\nexport function clone (date) {\n  return isDate(date) === true\n    ? new Date(date.getTime())\n    : date\n}\n\nexport default {\n  isValid,\n  extractDate,\n  buildDate,\n  getDayOfWeek,\n  getWeekOfYear,\n  isBetweenDates,\n  addToDate,\n  subtractFromDate,\n  adjustDate,\n  startOfDate,\n  endOfDate,\n  getMaxDate,\n  getMinDate,\n  getDateDiff,\n  getDayOfYear,\n  inferDateFormat,\n  getDateBetween,\n  isSameDate,\n  daysInMonth,\n  formatDate,\n  clone\n}\n","import { h, defineComponent, ref, computed, watch, Transition, nextTick, getCurrentInstance } from 'vue'\n\nimport QBtn from '../btn/QBtn.js'\n\nimport useDark, { useDarkProps } from '../../composables/private/use-dark.js'\nimport useCache from '../../composables/private/use-cache.js'\nimport { useFormProps, useFormAttrs, useFormInject } from '../../composables/private/use-form.js'\nimport useDatetime, { useDatetimeProps, useDatetimeEmits, getDayHash } from './use-datetime.js'\n\nimport { hSlot } from '../../utils/private/render.js'\nimport { formatDate, __splitDate, getDateDiff } from '../../utils/date.js'\nimport { pad } from '../../utils/format.js'\nimport { jalaaliMonthLength, toGregorian } from '../../utils/private/date-persian.js'\n\nconst yearsInterval = 20\nconst views = [ 'Calendar', 'Years', 'Months' ]\nconst viewIsValid = v => views.includes(v)\nconst yearMonthValidator = v => /^-?[\\d]+\\/[0-1]\\d$/.test(v)\nconst lineStr = ' \\u2014 '\n\nfunction getMonthHash (date) {\n  return date.year + '/' + pad(date.month)\n}\n\nexport default defineComponent({\n  name: 'QDate',\n\n  props: {\n    ...useDatetimeProps,\n    ...useFormProps,\n    ...useDarkProps,\n\n    multiple: Boolean,\n    range: Boolean,\n\n    title: String,\n    subtitle: String,\n\n    mask: {\n      // this mask is forced\n      // when using persian calendar\n      default: 'YYYY/MM/DD'\n    },\n\n    defaultYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n\n    yearsInMonthView: Boolean,\n\n    events: [ Array, Function ],\n    eventColor: [ String, Function ],\n\n    emitImmediately: Boolean,\n\n    options: [ Array, Function ],\n\n    navigationMinYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n\n    navigationMaxYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n\n    noUnset: Boolean,\n\n    firstDayOfWeek: [ String, Number ],\n    todayBtn: Boolean,\n    minimal: Boolean,\n    defaultView: {\n      type: String,\n      default: 'Calendar',\n      validator: viewIsValid\n    }\n  },\n\n  emits: [\n    ...useDatetimeEmits,\n    'range-start', 'range-end', 'navigation'\n  ],\n\n  setup (props, { slots, emit }) {\n    const { proxy } = getCurrentInstance()\n    const { $q } = proxy\n\n    const isDark = useDark(props, $q)\n    const { getCache } = useCache()\n    const { tabindex, headerClass, getLocale, getCurrentDate } = useDatetime(props, $q)\n\n    let lastEmitValue\n\n    const formAttrs = useFormAttrs(props)\n    const injectFormInput = useFormInject(formAttrs)\n\n    const blurTargetRef = ref(null)\n    const innerMask = ref(getMask())\n    const innerLocale = ref(getLocale())\n\n    const mask = computed(() => getMask())\n    const locale = computed(() => getLocale())\n\n    const today = computed(() => getCurrentDate())\n\n    // model of current calendar view:\n    const viewModel = ref(getViewModel(innerMask.value, innerLocale.value))\n\n    const view = ref(props.defaultView)\n\n    const direction = $q.lang.rtl === true ? 'right' : 'left'\n    const monthDirection = ref(direction.value)\n    const yearDirection = ref(direction.value)\n\n    const year = viewModel.value.year\n    const startYear = ref(year - (year % yearsInterval) - (year < 0 ? yearsInterval : 0))\n    const editRange = ref(null)\n\n    const classes = computed(() => {\n      const type = props.landscape === true ? 'landscape' : 'portrait'\n      return `q-date q-date--${ type } q-date--${ type }-${ props.minimal === true ? 'minimal' : 'standard' }`\n        + (isDark.value === true ? ' q-date--dark q-dark' : '')\n        + (props.bordered === true ? ' q-date--bordered' : '')\n        + (props.square === true ? ' q-date--square no-border-radius' : '')\n        + (props.flat === true ? ' q-date--flat no-shadow' : '')\n        + (props.disable === true ? ' disabled' : (props.readonly === true ? ' q-date--readonly' : ''))\n    })\n\n    const computedColor = computed(() => {\n      return props.color || 'primary'\n    })\n\n    const computedTextColor = computed(() => {\n      return props.textColor || 'white'\n    })\n\n    const isImmediate = computed(() =>\n      props.emitImmediately === true\n      && props.multiple !== true\n      && props.range !== true\n    )\n\n    const normalizedModel = computed(() => (\n      Array.isArray(props.modelValue) === true\n        ? props.modelValue\n        : (props.modelValue !== null && props.modelValue !== void 0 ? [ props.modelValue ] : [])\n    ))\n\n    const daysModel = computed(() =>\n      normalizedModel.value\n        .filter(date => typeof date === 'string')\n        .map(date => decodeString(date, innerMask.value, innerLocale.value))\n        .filter(date => date.dateHash !== null)\n    )\n\n    const rangeModel = computed(() => {\n      const fn = date => decodeString(date, innerMask.value, innerLocale.value)\n      return normalizedModel.value\n        .filter(date => Object(date) === date && date.from !== void 0 && date.to !== void 0)\n        .map(range => ({ from: fn(range.from), to: fn(range.to) }))\n        .filter(range => range.from.dateHash !== null && range.to.dateHash !== null && range.from.dateHash < range.to.dateHash)\n    })\n\n    const getNativeDateFn = computed(() => (\n      props.calendar !== 'persian'\n        ? model => new Date(model.year, model.month - 1, model.day)\n        : model => {\n          const gDate = toGregorian(model.year, model.month, model.day)\n          return new Date(gDate.gy, gDate.gm - 1, gDate.gd)\n        }\n    ))\n\n    const encodeObjectFn = computed(() => (\n      props.calendar === 'persian'\n        ? getDayHash\n        : (date, mask, locale) => formatDate(\n            new Date(\n              date.year,\n              date.month - 1,\n              date.day,\n              date.hour,\n              date.minute,\n              date.second,\n              date.millisecond\n            ),\n            mask === void 0 ? innerMask.value : mask,\n            locale === void 0 ? innerLocale.value : locale,\n            date.year,\n            date.timezoneOffset\n          )\n    ))\n\n    const daysInModel = computed(() =>\n      daysModel.value.length + rangeModel.value.reduce(\n        (acc, range) => acc + 1 + getDateDiff(\n          getNativeDateFn.value(range.to),\n          getNativeDateFn.value(range.from)\n        ),\n        0\n      )\n    )\n\n    const headerTitle = computed(() => {\n      if (props.title !== void 0 && props.title !== null && props.title.length > 0) {\n        return props.title\n      }\n\n      if (editRange.value !== null) {\n        const model = editRange.value.init\n        const date = getNativeDateFn.value(model)\n\n        return innerLocale.value.daysShort[ date.getDay() ] + ', '\n          + innerLocale.value.monthsShort[ model.month - 1 ] + ' '\n          + model.day + lineStr + '?'\n      }\n\n      if (daysInModel.value === 0) {\n        return lineStr\n      }\n\n      if (daysInModel.value > 1) {\n        return `${ daysInModel.value } ${ innerLocale.value.pluralDay }`\n      }\n\n      const model = daysModel.value[ 0 ]\n      const date = getNativeDateFn.value(model)\n\n      if (isNaN(date.valueOf()) === true) {\n        return lineStr\n      }\n\n      if (innerLocale.value.headerTitle !== void 0) {\n        return innerLocale.value.headerTitle(date, model)\n      }\n\n      return innerLocale.value.daysShort[ date.getDay() ] + ', '\n        + innerLocale.value.monthsShort[ model.month - 1 ] + ' '\n        + model.day\n    })\n\n    const minSelectedModel = computed(() => {\n      const model = daysModel.value.concat(rangeModel.value.map(range => range.from))\n        .sort((a, b) => a.year - b.year || a.month - b.month)\n\n      return model[ 0 ]\n    })\n\n    const maxSelectedModel = computed(() => {\n      const model = daysModel.value.concat(rangeModel.value.map(range => range.to))\n        .sort((a, b) => b.year - a.year || b.month - a.month)\n\n      return model[ 0 ]\n    })\n\n    const headerSubtitle = computed(() => {\n      if (props.subtitle !== void 0 && props.subtitle !== null && props.subtitle.length > 0) {\n        return props.subtitle\n      }\n\n      if (daysInModel.value === 0) {\n        return lineStr\n      }\n\n      if (daysInModel.value > 1) {\n        const from = minSelectedModel.value\n        const to = maxSelectedModel.value\n        const month = innerLocale.value.monthsShort\n\n        return month[ from.month - 1 ] + (\n          from.year !== to.year\n            ? ' ' + from.year + lineStr + month[ to.month - 1 ] + ' '\n            : (\n                from.month !== to.month\n                  ? lineStr + month[ to.month - 1 ]\n                  : ''\n              )\n        ) + ' ' + to.year\n      }\n\n      return daysModel.value[ 0 ].year\n    })\n\n    const dateArrow = computed(() => {\n      const val = [ $q.iconSet.datetime.arrowLeft, $q.iconSet.datetime.arrowRight ]\n      return $q.lang.rtl === true ? val.reverse() : val\n    })\n\n    const computedFirstDayOfWeek = computed(() => (\n      props.firstDayOfWeek !== void 0\n        ? Number(props.firstDayOfWeek)\n        : innerLocale.value.firstDayOfWeek\n    ))\n\n    const daysOfWeek = computed(() => {\n      const\n        days = innerLocale.value.daysShort,\n        first = computedFirstDayOfWeek.value\n\n      return first > 0\n        ? days.slice(first, 7).concat(days.slice(0, first))\n        : days\n    })\n\n    const daysInMonth = computed(() => {\n      const date = viewModel.value\n      return props.calendar !== 'persian'\n        ? (new Date(date.year, date.month, 0)).getDate()\n        : jalaaliMonthLength(date.year, date.month)\n    })\n\n    const evtColor = computed(() => (\n      typeof props.eventColor === 'function'\n        ? props.eventColor\n        : () => props.eventColor\n    ))\n\n    const minNav = computed(() => {\n      if (props.navigationMinYearMonth === void 0) {\n        return null\n      }\n\n      const data = props.navigationMinYearMonth.split('/')\n      return { year: parseInt(data[ 0 ], 10), month: parseInt(data[ 1 ], 10) }\n    })\n\n    const maxNav = computed(() => {\n      if (props.navigationMaxYearMonth === void 0) {\n        return null\n      }\n\n      const data = props.navigationMaxYearMonth.split('/')\n      return { year: parseInt(data[ 0 ], 10), month: parseInt(data[ 1 ], 10) }\n    })\n\n    const navBoundaries = computed(() => {\n      const data = {\n        month: { prev: true, next: true },\n        year: { prev: true, next: true }\n      }\n\n      if (minNav.value !== null && minNav.value.year >= viewModel.value.year) {\n        data.year.prev = false\n        if (minNav.value.year === viewModel.value.year && minNav.value.month >= viewModel.value.month) {\n          data.month.prev = false\n        }\n      }\n\n      if (maxNav.value !== null && maxNav.value.year <= viewModel.value.year) {\n        data.year.next = false\n        if (maxNav.value.year === viewModel.value.year && maxNav.value.month <= viewModel.value.month) {\n          data.month.next = false\n        }\n      }\n\n      return data\n    })\n\n    const daysMap = computed(() => {\n      const map = {}\n\n      daysModel.value.forEach(entry => {\n        const hash = getMonthHash(entry)\n\n        if (map[ hash ] === void 0) {\n          map[ hash ] = []\n        }\n\n        map[ hash ].push(entry.day)\n      })\n\n      return map\n    })\n\n    const rangeMap = computed(() => {\n      const map = {}\n\n      rangeModel.value.forEach(entry => {\n        const hashFrom = getMonthHash(entry.from)\n        const hashTo = getMonthHash(entry.to)\n\n        if (map[ hashFrom ] === void 0) {\n          map[ hashFrom ] = []\n        }\n\n        map[ hashFrom ].push({\n          from: entry.from.day,\n          to: hashFrom === hashTo ? entry.to.day : void 0,\n          range: entry\n        })\n\n        if (hashFrom < hashTo) {\n          let hash\n          const { year, month } = entry.from\n          const cur = month < 12\n            ? { year, month: month + 1 }\n            : { year: year + 1, month: 1 }\n\n          while ((hash = getMonthHash(cur)) <= hashTo) {\n            if (map[ hash ] === void 0) {\n              map[ hash ] = []\n            }\n\n            map[ hash ].push({\n              from: void 0,\n              to: hash === hashTo ? entry.to.day : void 0,\n              range: entry\n            })\n\n            cur.month++\n            if (cur.month > 12) {\n              cur.year++\n              cur.month = 1\n            }\n          }\n        }\n      })\n\n      return map\n    })\n\n    const rangeView = computed(() => {\n      if (editRange.value === null) {\n        return\n      }\n\n      const { init, initHash, final, finalHash } = editRange.value\n\n      const [ from, to ] = initHash <= finalHash\n        ? [ init, final ]\n        : [ final, init ]\n\n      const fromHash = getMonthHash(from)\n      const toHash = getMonthHash(to)\n\n      if (fromHash !== viewMonthHash.value && toHash !== viewMonthHash.value) {\n        return\n      }\n\n      const view = {}\n\n      if (fromHash === viewMonthHash.value) {\n        view.from = from.day\n        view.includeFrom = true\n      }\n      else {\n        view.from = 1\n      }\n\n      if (toHash === viewMonthHash.value) {\n        view.to = to.day\n        view.includeTo = true\n      }\n      else {\n        view.to = daysInMonth.value\n      }\n\n      return view\n    })\n\n    const viewMonthHash = computed(() => getMonthHash(viewModel.value))\n\n    const selectionDaysMap = computed(() => {\n      const map = {}\n\n      if (props.options === void 0) {\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          map[ i ] = true\n        }\n\n        return map\n      }\n\n      const fn = typeof props.options === 'function'\n        ? props.options\n        : date => props.options.includes(date)\n\n      for (let i = 1; i <= daysInMonth.value; i++) {\n        const dayHash = viewMonthHash.value + '/' + pad(i)\n        map[ i ] = fn(dayHash)\n      }\n\n      return map\n    })\n\n    const eventDaysMap = computed(() => {\n      const map = {}\n\n      if (props.events === void 0) {\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          map[ i ] = false\n        }\n      }\n      else {\n        const fn = typeof props.events === 'function'\n          ? props.events\n          : date => props.events.includes(date)\n\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          const dayHash = viewMonthHash.value + '/' + pad(i)\n          map[ i ] = fn(dayHash) === true && evtColor.value(dayHash)\n        }\n      }\n\n      return map\n    })\n\n    const viewDays = computed(() => {\n      let date, endDay\n      const { year, month } = viewModel.value\n\n      if (props.calendar !== 'persian') {\n        date = new Date(year, month - 1, 1)\n        endDay = (new Date(year, month - 1, 0)).getDate()\n      }\n      else {\n        const gDate = toGregorian(year, month, 1)\n        date = new Date(gDate.gy, gDate.gm - 1, gDate.gd)\n        let prevJM = month - 1\n        let prevJY = year\n        if (prevJM === 0) {\n          prevJM = 12\n          prevJY--\n        }\n        endDay = jalaaliMonthLength(prevJY, prevJM)\n      }\n\n      return {\n        days: date.getDay() - computedFirstDayOfWeek.value - 1,\n        endDay\n      }\n    })\n\n    const days = computed(() => {\n      const res = []\n      const { days, endDay } = viewDays.value\n\n      const len = days < 0 ? days + 7 : days\n      if (len < 6) {\n        for (let i = endDay - len; i <= endDay; i++) {\n          res.push({ i, fill: true })\n        }\n      }\n\n      const index = res.length\n\n      for (let i = 1; i <= daysInMonth.value; i++) {\n        const day = { i, event: eventDaysMap.value[ i ], classes: [] }\n\n        if (selectionDaysMap.value[ i ] === true) {\n          day.in = true\n          day.flat = true\n        }\n\n        res.push(day)\n      }\n\n      // if current view has days in model\n      if (daysMap.value[ viewMonthHash.value ] !== void 0) {\n        daysMap.value[ viewMonthHash.value ].forEach(day => {\n          const i = index + day - 1\n          Object.assign(res[ i ], {\n            selected: true,\n            unelevated: true,\n            flat: false,\n            color: computedColor.value,\n            textColor: computedTextColor.value\n          })\n        })\n      }\n\n      // if current view has ranges in model\n      if (rangeMap.value[ viewMonthHash.value ] !== void 0) {\n        rangeMap.value[ viewMonthHash.value ].forEach(entry => {\n          if (entry.from !== void 0) {\n            const from = index + entry.from - 1\n            const to = index + (entry.to || daysInMonth.value) - 1\n\n            for (let day = from; day <= to; day++) {\n              Object.assign(res[ day ], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              })\n            }\n\n            Object.assign(res[ from ], {\n              rangeFrom: true,\n              flat: false\n            })\n\n            entry.to !== void 0 && Object.assign(res[ to ], {\n              rangeTo: true,\n              flat: false\n            })\n          }\n          else if (entry.to !== void 0) {\n            const to = index + entry.to - 1\n\n            for (let day = index; day <= to; day++) {\n              Object.assign(res[ day ], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              })\n            }\n\n            Object.assign(res[ to ], {\n              flat: false,\n              rangeTo: true\n            })\n          }\n          else {\n            const to = index + daysInMonth.value - 1\n            for (let day = index; day <= to; day++) {\n              Object.assign(res[ day ], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              })\n            }\n          }\n        })\n      }\n\n      if (rangeView.value !== void 0) {\n        const from = index + rangeView.value.from - 1\n        const to = index + rangeView.value.to - 1\n\n        for (let day = from; day <= to; day++) {\n          res[ day ].color = computedColor.value\n          res[ day ].editRange = true\n        }\n\n        if (rangeView.value.includeFrom === true) {\n          res[ from ].editRangeFrom = true\n        }\n        if (rangeView.value.includeTo === true) {\n          res[ to ].editRangeTo = true\n        }\n      }\n\n      if (viewModel.value.year === today.value.year && viewModel.value.month === today.value.month) {\n        res[ index + today.value.day - 1 ].today = true\n      }\n\n      const left = res.length % 7\n      if (left > 0) {\n        const afterDays = 7 - left\n        for (let i = 1; i <= afterDays; i++) {\n          res.push({ i, fill: true })\n        }\n      }\n\n      res.forEach(day => {\n        let cls = 'q-date__calendar-item '\n\n        if (day.fill === true) {\n          cls += 'q-date__calendar-item--fill'\n        }\n        else {\n          cls += `q-date__calendar-item--${ day.in === true ? 'in' : 'out' }`\n\n          if (day.range !== void 0) {\n            cls += ` q-date__range${ day.rangeTo === true ? '-to' : (day.rangeFrom === true ? '-from' : '') }`\n          }\n\n          if (day.editRange === true) {\n            cls += ` q-date__edit-range${ day.editRangeFrom === true ? '-from' : '' }${ day.editRangeTo === true ? '-to' : '' }`\n          }\n\n          if (day.range !== void 0 || day.editRange === true) {\n            cls += ` text-${ day.color }`\n          }\n        }\n\n        day.classes = cls\n      })\n\n      return res\n    })\n\n    const attributes = computed(() => (\n      props.disable === true\n        ? { 'aria-disabled': 'true' }\n        : (props.readonly === true ? { 'aria-readonly': 'true' } : {})\n    ))\n\n    watch(() => props.modelValue, v => {\n      if (lastEmitValue === v) {\n        lastEmitValue = 0\n      }\n      else {\n        const { year, month } = getViewModel(innerMask.value, innerLocale.value)\n        updateViewModel(year, month)\n      }\n    })\n\n    watch(view, () => {\n      blurTargetRef.value !== null && blurTargetRef.value.focus()\n    })\n\n    watch(() => viewModel.value.year, year => {\n      emit('navigation', { year, month: viewModel.value.month })\n    })\n\n    watch(() => viewModel.value.month, month => {\n      emit('navigation', { year: viewModel.value.year, month })\n    })\n\n    watch(mask, val => {\n      updateValue(val, innerLocale.value, 'mask')\n      innerMask.value = val\n    })\n\n    watch(locale, val => {\n      updateValue(innerMask.value, val, 'locale')\n      innerLocale.value = val\n    })\n\n    function setToday () {\n      toggleDate(today.value, getMonthHash(today.value))\n      setCalendarTo(today.value.year, today.value.month)\n    }\n\n    function setView (viewMode) {\n      if (viewIsValid(viewMode) === true) {\n        view.value = viewMode\n      }\n    }\n\n    function offsetCalendar (type, descending) {\n      if ([ 'month', 'year' ].includes(type)) {\n        const fn = type === 'month' ? goToMonth : goToYear\n        fn(descending === true ? -1 : 1)\n      }\n    }\n\n    function setCalendarTo (year, month) {\n      view.value = 'Calendar'\n      updateViewModel(year, month)\n    }\n\n    function setEditingRange (from, to) {\n      if (props.range === false || !from) {\n        editRange.value = null\n        return\n      }\n\n      const init = Object.assign({ ...viewModel.value }, from)\n      const final = to !== void 0\n        ? Object.assign({ ...viewModel.value }, to)\n        : init\n\n      editRange.value = {\n        init,\n        initHash: getDayHash(init),\n        final,\n        finalHash: getDayHash(final)\n      }\n\n      setCalendarTo(init.year, init.month)\n    }\n\n    function getMask () {\n      return props.calendar === 'persian' ? 'YYYY/MM/DD' : props.mask\n    }\n\n    function decodeString (date, mask, locale) {\n      return __splitDate(\n        date,\n        mask,\n        locale,\n        props.calendar,\n        {\n          hour: 0,\n          minute: 0,\n          second: 0,\n          millisecond: 0\n        }\n      )\n    }\n\n    function getViewModel (mask, locale) {\n      const model = Array.isArray(props.modelValue) === true\n        ? props.modelValue\n        : (props.modelValue ? [ props.modelValue ] : [])\n\n      if (model.length === 0) {\n        return getDefaultViewModel()\n      }\n\n      const decoded = decodeString(\n        model[ 0 ].from !== void 0 ? model[ 0 ].from : model[ 0 ],\n        mask,\n        locale\n      )\n\n      return decoded.dateHash === null\n        ? getDefaultViewModel()\n        : decoded\n    }\n\n    function getDefaultViewModel () {\n      let year, month\n\n      if (props.defaultYearMonth !== void 0) {\n        const d = props.defaultYearMonth.split('/')\n        year = parseInt(d[ 0 ], 10)\n        month = parseInt(d[ 1 ], 10)\n      }\n      else {\n        // may come from data() where computed\n        // props are not yet available\n        const d = today.value !== void 0\n          ? today.value\n          : getCurrentDate()\n\n        year = d.year\n        month = d.month\n      }\n\n      return {\n        year,\n        month,\n        day: 1,\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0,\n        dateHash: year + '/' + pad(month) + '/01'\n      }\n    }\n\n    function goToMonth (offset) {\n      let year = viewModel.value.year\n      let month = Number(viewModel.value.month) + offset\n\n      if (month === 13) {\n        month = 1\n        year++\n      }\n      else if (month === 0) {\n        month = 12\n        year--\n      }\n\n      updateViewModel(year, month)\n      isImmediate.value === true && emitImmediately('month')\n    }\n\n    function goToYear (offset) {\n      const year = Number(viewModel.value.year) + offset\n      updateViewModel(year, viewModel.value.month)\n      isImmediate.value === true && emitImmediately('year')\n    }\n\n    function setYear (year) {\n      updateViewModel(year, viewModel.value.month)\n      view.value = props.defaultView === 'Years' ? 'Months' : 'Calendar'\n      isImmediate.value === true && emitImmediately('year')\n    }\n\n    function setMonth (month) {\n      updateViewModel(viewModel.value.year, month)\n      view.value = 'Calendar'\n      isImmediate.value === true && emitImmediately('month')\n    }\n\n    function toggleDate (date, monthHash) {\n      const month = daysMap.value[ monthHash ]\n      const fn = month !== void 0 && month.includes(date.day) === true\n        ? removeFromModel\n        : addToModel\n\n      fn(date)\n    }\n\n    function getShortDate (date) {\n      return { year: date.year, month: date.month, day: date.day }\n    }\n\n    function updateViewModel (year, month) {\n      if (minNav.value !== null && year <= minNav.value.year) {\n        year = minNav.value.year\n        if (month < minNav.value.month) {\n          month = minNav.value.month\n        }\n      }\n\n      if (maxNav.value !== null && year >= maxNav.value.year) {\n        year = maxNav.value.year\n        if (month > maxNav.value.month) {\n          month = maxNav.value.month\n        }\n      }\n\n      const newHash = year + '/' + pad(month) + '/01'\n\n      if (newHash !== viewModel.value.dateHash) {\n        monthDirection.value = (viewModel.value.dateHash < newHash) === ($q.lang.rtl !== true) ? 'left' : 'right'\n        if (year !== viewModel.value.year) {\n          yearDirection.value = monthDirection.value\n        }\n\n        nextTick(() => {\n          startYear.value = year - year % yearsInterval - (year < 0 ? yearsInterval : 0)\n          Object.assign(viewModel.value, {\n            year,\n            month,\n            day: 1,\n            dateHash: newHash\n          })\n        })\n      }\n    }\n\n    function emitValue (val, action, date) {\n      const value = val !== null && val.length === 1 && props.multiple === false\n        ? val[ 0 ]\n        : val\n\n      lastEmitValue = value\n\n      const { reason, details } = getEmitParams(action, date)\n      emit('update:modelValue', value, reason, details)\n    }\n\n    function emitImmediately (reason) {\n      const date = daysModel.value[ 0 ] !== void 0 && daysModel.value[ 0 ].dateHash !== null\n        ? { ...daysModel.value[ 0 ] }\n        : { ...viewModel.value } // inherit day, hours, minutes, milliseconds...\n\n      // nextTick required because of animation delay in viewModel\n      nextTick(() => {\n        date.year = viewModel.value.year\n        date.month = viewModel.value.month\n\n        const maxDay = props.calendar !== 'persian'\n          ? (new Date(date.year, date.month, 0)).getDate()\n          : jalaaliMonthLength(date.year, date.month)\n\n        date.day = Math.min(Math.max(1, date.day), maxDay)\n\n        const value = encodeEntry(date)\n        lastEmitValue = value\n\n        const { details } = getEmitParams('', date)\n        emit('update:modelValue', value, reason, details)\n      })\n    }\n\n    function getEmitParams (action, date) {\n      return date.from !== void 0\n        ? {\n            reason: `${ action }-range`,\n            details: {\n              ...getShortDate(date.target),\n              from: getShortDate(date.from),\n              to: getShortDate(date.to)\n            }\n          }\n        : {\n            reason: `${ action }-day`,\n            details: getShortDate(date)\n          }\n    }\n\n    function encodeEntry (date, mask, locale) {\n      return date.from !== void 0\n        ? { from: encodeObjectFn.value(date.from, mask, locale), to: encodeObjectFn.value(date.to, mask, locale) }\n        : encodeObjectFn.value(date, mask, locale)\n    }\n\n    function addToModel (date) {\n      let value\n\n      if (props.multiple === true) {\n        if (date.from !== void 0) {\n          // we also need to filter out intersections\n\n          const fromHash = getDayHash(date.from)\n          const toHash = getDayHash(date.to)\n\n          const days = daysModel.value\n            .filter(day => day.dateHash < fromHash || day.dateHash > toHash)\n\n          const ranges = rangeModel.value\n            .filter(({ from, to }) => to.dateHash < fromHash || from.dateHash > toHash)\n\n          value = days.concat(ranges).concat(date).map(entry => encodeEntry(entry))\n        }\n        else {\n          const model = normalizedModel.value.slice()\n          model.push(encodeEntry(date))\n          value = model\n        }\n      }\n      else {\n        value = encodeEntry(date)\n      }\n\n      emitValue(value, 'add', date)\n    }\n\n    function removeFromModel (date) {\n      if (props.noUnset === true) {\n        return\n      }\n\n      let model = null\n\n      if (props.multiple === true && Array.isArray(props.modelValue) === true) {\n        const val = encodeEntry(date)\n\n        if (date.from !== void 0) {\n          model = props.modelValue.filter(\n            date => (\n              date.from !== void 0\n                ? (date.from !== val.from && date.to !== val.to)\n                : true\n            )\n          )\n        }\n        else {\n          model = props.modelValue.filter(date => date !== val)\n        }\n\n        if (model.length === 0) {\n          model = null\n        }\n      }\n\n      emitValue(model, 'remove', date)\n    }\n\n    function updateValue (mask, locale, reason) {\n      const model = daysModel.value\n        .concat(rangeModel.value)\n        .map(entry => encodeEntry(entry, mask, locale))\n        .filter(entry => {\n          return entry.from !== void 0\n            ? entry.from.dateHash !== null && entry.to.dateHash !== null\n            : entry.dateHash !== null\n        })\n\n      emit('update:modelValue', (props.multiple === true ? model : model[ 0 ]) || null, reason)\n    }\n\n    // expose public methods\n    Object.assign(proxy, {\n      setToday, setView, offsetCalendar, setCalendarTo, setEditingRange\n    })\n\n    function getHeader () {\n      if (props.minimal === true) { return }\n\n      return h('div', {\n        class: 'q-date__header ' + headerClass.value\n      }, [\n        h('div', {\n          class: 'relative-position'\n        }, [\n          h(Transition, {\n            name: 'q-transition--fade'\n          }, () => h('div', {\n            key: 'h-yr-' + headerSubtitle.value,\n            class: 'q-date__header-subtitle q-date__header-link '\n              + (view.value === 'Years' ? 'q-date__header-link--active' : 'cursor-pointer'),\n            tabindex: tabindex.value,\n            ...getCache('vY', {\n              onClick () { view.value = 'Years' },\n              onKeyup (e) { e.keyCode === 13 && (view.value = 'Years') }\n            })\n          }, [ headerSubtitle.value ]))\n        ]),\n\n        h('div', {\n          class: 'q-date__header-title relative-position flex no-wrap'\n        }, [\n          h('div', {\n            class: 'relative-position col'\n          }, [\n            h(Transition, {\n              name: 'q-transition--fade'\n            }, () => h('div', {\n              key: 'h-sub' + headerTitle.value,\n              class: 'q-date__header-title-label q-date__header-link '\n                + (view.value === 'Calendar' ? 'q-date__header-link--active' : 'cursor-pointer'),\n              tabindex: tabindex.value,\n              ...getCache('vC', {\n                onClick () { view.value = 'Calendar' },\n                onKeyup (e) { e.keyCode === 13 && (view.value = 'Calendar') }\n              })\n            }, [ headerTitle.value ]))\n          ]),\n\n          props.todayBtn === true ? h(QBtn, {\n            class: 'q-date__header-today self-start',\n            icon: $q.iconSet.datetime.today,\n            flat: true,\n            size: 'sm',\n            round: true,\n            tabindex: tabindex.value,\n            onClick: setToday\n          }) : null\n        ])\n      ])\n    }\n\n    function getNavigation ({ label, type, key, dir, goTo, boundaries, cls }) {\n      return [\n        h('div', {\n          class: 'row items-center q-date__arrow'\n        }, [\n          h(QBtn, {\n            round: true,\n            dense: true,\n            size: 'sm',\n            flat: true,\n            icon: dateArrow.value[ 0 ],\n            tabindex: tabindex.value,\n            disable: boundaries.prev === false,\n            ...getCache('go-#' + type, { onClick () { goTo(-1) } })\n          })\n        ]),\n\n        h('div', {\n          class: 'relative-position overflow-hidden flex flex-center' + cls\n        }, [\n          h(Transition, {\n            name: 'q-transition--jump-' + dir\n          }, () => h('div', { key }, [\n            h(QBtn, {\n              flat: true,\n              dense: true,\n              noCaps: true,\n              label,\n              tabindex: tabindex.value,\n              ...getCache('view#' + type, { onClick: () => { view.value = type } })\n            })\n          ]))\n        ]),\n\n        h('div', {\n          class: 'row items-center q-date__arrow'\n        }, [\n          h(QBtn, {\n            round: true,\n            dense: true,\n            size: 'sm',\n            flat: true,\n            icon: dateArrow.value[ 1 ],\n            tabindex: tabindex.value,\n            disable: boundaries.next === false,\n            ...getCache('go+#' + type, { onClick () { goTo(1) } })\n          })\n        ])\n      ]\n    }\n\n    const renderViews = {\n      Calendar: () => ([\n        h('div', {\n          key: 'calendar-view',\n          class: 'q-date__view q-date__calendar'\n        }, [\n          h('div', {\n            class: 'q-date__navigation row items-center no-wrap'\n          }, getNavigation({\n            label: innerLocale.value.months[ viewModel.value.month - 1 ],\n            type: 'Months',\n            key: viewModel.value.month,\n            dir: monthDirection.value,\n            goTo: goToMonth,\n            boundaries: navBoundaries.value.month,\n            cls: ' col'\n          }).concat(getNavigation({\n            label: viewModel.value.year,\n            type: 'Years',\n            key: viewModel.value.year,\n            dir: yearDirection.value,\n            goTo: goToYear,\n            boundaries: navBoundaries.value.year,\n            cls: ''\n          }))),\n\n          h('div', {\n            class: 'q-date__calendar-weekdays row items-center no-wrap'\n          }, daysOfWeek.value.map(day => h('div', { class: 'q-date__calendar-item' }, [ h('div', day) ]))),\n\n          h('div', {\n            class: 'q-date__calendar-days-container relative-position overflow-hidden'\n          }, [\n            h(Transition, {\n              name: 'q-transition--slide-' + monthDirection.value\n            }, () => h('div', {\n              key: viewMonthHash.value,\n              class: 'q-date__calendar-days fit'\n            }, days.value.map(day => h('div', { class: day.classes }, [\n              day.in === true\n                ? h(\n                    QBtn, {\n                      class: day.today === true ? 'q-date__today' : '',\n                      dense: true,\n                      flat: day.flat,\n                      unelevated: day.unelevated,\n                      color: day.color,\n                      textColor: day.textColor,\n                      label: day.i,\n                      tabindex: tabindex.value,\n                      ...getCache('day#' + day.i, {\n                        onClick: () => { onDayClick(day.i) },\n                        onMouseover: () => { onDayMouseover(day.i) }\n                      })\n                    },\n                    day.event !== false\n                      ? () => h('div', { class: 'q-date__event bg-' + day.event })\n                      : null\n                  )\n                : h('div', '' + day.i)\n            ]))))\n          ])\n        ])\n      ]),\n\n      Months () {\n        const currentYear = viewModel.value.year === today.value.year\n        const isDisabled = month => {\n          return (\n            (minNav.value !== null && viewModel.value.year === minNav.value.year && minNav.value.month > month)\n            || (maxNav.value !== null && viewModel.value.year === maxNav.value.year && maxNav.value.month < month)\n          )\n        }\n\n        const content = innerLocale.value.monthsShort.map((month, i) => {\n          const active = viewModel.value.month === i + 1\n\n          return h('div', {\n            class: 'q-date__months-item flex flex-center'\n          }, [\n            h(QBtn, {\n              class: currentYear === true && today.value.month === i + 1 ? 'q-date__today' : null,\n              flat: active !== true,\n              label: month,\n              unelevated: active,\n              color: active === true ? computedColor.value : null,\n              textColor: active === true ? computedTextColor.value : null,\n              tabindex: tabindex.value,\n              disable: isDisabled(i + 1),\n              ...getCache('month#' + i, { onClick: () => { setMonth(i + 1) } })\n            })\n          ])\n        })\n\n        props.yearsInMonthView === true && content.unshift(\n          h('div', { class: 'row no-wrap full-width' }, [\n            getNavigation({\n              label: viewModel.value.year,\n              type: 'Years',\n              key: viewModel.value.year,\n              dir: yearDirection.value,\n              goTo: goToYear,\n              boundaries: navBoundaries.value.year,\n              cls: ' col'\n            })\n          ])\n        )\n\n        return h('div', {\n          key: 'months-view',\n          class: 'q-date__view q-date__months flex flex-center'\n        }, content)\n      },\n\n      Years () {\n        const\n          start = startYear.value,\n          stop = start + yearsInterval,\n          years = []\n\n        const isDisabled = year => {\n          return (\n            (minNav.value !== null && minNav.value.year > year)\n            || (maxNav.value !== null && maxNav.value.year < year)\n          )\n        }\n\n        for (let i = start; i <= stop; i++) {\n          const active = viewModel.value.year === i\n\n          years.push(\n            h('div', {\n              class: 'q-date__years-item flex flex-center'\n            }, [\n              h(QBtn, {\n                key: 'yr' + i,\n                class: today.value.year === i ? 'q-date__today' : null,\n                flat: !active,\n                label: i,\n                dense: true,\n                unelevated: active,\n                color: active === true ? computedColor.value : null,\n                textColor: active === true ? computedTextColor.value : null,\n                tabindex: tabindex.value,\n                disable: isDisabled(i),\n                ...getCache('yr#' + i, { onClick: () => { setYear(i) } })\n              })\n            ])\n          )\n        }\n\n        return h('div', {\n          class: 'q-date__view q-date__years flex flex-center'\n        }, [\n          h('div', {\n            class: 'col-auto'\n          }, [\n            h(QBtn, {\n              round: true,\n              dense: true,\n              flat: true,\n              icon: dateArrow.value[ 0 ],\n              tabindex: tabindex.value,\n              disable: isDisabled(start),\n              ...getCache('y-', { onClick: () => { startYear.value -= yearsInterval } })\n            })\n          ]),\n\n          h('div', {\n            class: 'q-date__years-content col self-stretch row items-center'\n          }, years),\n\n          h('div', {\n            class: 'col-auto'\n          }, [\n            h(QBtn, {\n              round: true,\n              dense: true,\n              flat: true,\n              icon: dateArrow.value[ 1 ],\n              tabindex: tabindex.value,\n              disable: isDisabled(stop),\n              ...getCache('y+', { onClick: () => { startYear.value += yearsInterval } })\n            })\n          ])\n        ])\n      }\n    }\n\n    function onDayClick (dayIndex) {\n      const day = { ...viewModel.value, day: dayIndex }\n\n      if (props.range === false) {\n        toggleDate(day, viewMonthHash.value)\n        return\n      }\n\n      if (editRange.value === null) {\n        const dayProps = days.value.find(day => day.fill !== true && day.i === dayIndex)\n\n        if (dayProps.range !== void 0) {\n          removeFromModel({ target: day, from: dayProps.range.from, to: dayProps.range.to })\n          return\n        }\n\n        if (dayProps.selected === true) {\n          removeFromModel(day)\n          return\n        }\n\n        const initHash = getDayHash(day)\n\n        editRange.value = {\n          init: day,\n          initHash,\n          final: day,\n          finalHash: initHash\n        }\n\n        emit('range-start', getShortDate(day))\n      }\n      else {\n        const\n          initHash = editRange.value.initHash,\n          finalHash = getDayHash(day),\n          payload = initHash <= finalHash\n            ? { from: editRange.value.init, to: day }\n            : { from: day, to: editRange.value.init }\n\n        editRange.value = null\n        addToModel(initHash === finalHash ? day : { target: day, ...payload })\n\n        emit('range-end', {\n          from: getShortDate(payload.from),\n          to: getShortDate(payload.to)\n        })\n      }\n    }\n\n    function onDayMouseover (dayIndex) {\n      if (editRange.value !== null) {\n        const final = { ...viewModel.value, day: dayIndex }\n\n        Object.assign(editRange.value, {\n          final,\n          finalHash: getDayHash(final)\n        })\n      }\n    }\n\n    return () => {\n      const content = [\n        h('div', {\n          class: 'q-date__content col relative-position'\n        }, [\n          h(Transition, {\n            name: 'q-transition--fade'\n          }, renderViews[ view.value ])\n        ])\n      ]\n\n      const def = hSlot(slots.default)\n      def !== void 0 && content.push(\n        h('div', { class: 'q-date__actions' }, def)\n      )\n\n      if (props.name !== void 0 && props.disable !== true) {\n        injectFormInput(content, 'push')\n      }\n\n      return h('div', {\n        class: classes.value,\n        ...attributes.value\n      }, [\n        getHeader(),\n\n        h('div', {\n          ref: blurTargetRef,\n          class: 'q-date__main col column',\n          tabindex: -1\n        }, content)\n      ])\n    }\n  }\n})\n","import { h, defineComponent, ref, computed, watch, getCurrentInstance } from 'vue'\n\nimport QDialog from '../dialog/QDialog.js'\nimport QMenu from '../menu/QMenu.js'\n\nimport useAnchor, { useAnchorProps } from '../../composables/private/use-anchor.js'\nimport { hSlot } from '../../utils/private/render.js'\n\nexport default defineComponent({\n  name: 'QPopupProxy',\n\n  props: {\n    ...useAnchorProps,\n\n    breakpoint: {\n      type: [ String, Number ],\n      default: 450\n    }\n  },\n\n  emits: [ 'show', 'hide' ],\n\n  setup (props, { slots, emit, attrs }) {\n    const { proxy } = getCurrentInstance()\n    const { $q } = proxy\n\n    const showing = ref(false)\n    const popupRef = ref(null)\n    const breakpoint = computed(() => parseInt(props.breakpoint, 10))\n\n    const { canShow } = useAnchor({ showing })\n\n    function getType () {\n      return $q.screen.width < breakpoint.value || $q.screen.height < breakpoint.value\n        ? 'dialog'\n        : 'menu'\n    }\n\n    const type = ref(getType())\n\n    watch(() => getType(), val => {\n      if (showing.value !== true) {\n        type.value = val\n      }\n    })\n\n    // expose public methods\n    Object.assign(proxy, {\n      show (evt) { canShow(evt) === true && popupRef.value.show(evt) },\n      hide (evt) { popupRef.value.hide(evt) },\n      toggle (evt) { popupRef.value.toggle(evt) }\n    })\n\n    function onShow (evt) {\n      showing.value = true\n      emit('show', evt)\n    }\n\n    function onHide (evt) {\n      showing.value = false\n      type.value = getType()\n      emit('hide', evt)\n    }\n\n    return () => {\n      const def = hSlot(slots.default)\n\n      const popupProps = (\n        type.value === 'menu'\n        && def !== void 0\n        && def[ 0 ] !== void 0\n        && def[ 0 ].type !== void 0\n        && [ 'QDate', 'QTime', 'QCarousel', 'QColor' ].includes(\n          def[ 0 ].type.name\n        )\n      ) ? { cover: true, maxHeight: '99vh' } : {}\n\n      const data = {\n        ref: popupRef,\n        ...popupProps,\n        ...attrs,\n        onShow,\n        onHide\n      }\n\n      let component\n\n      if (type.value === 'dialog') {\n        component = QDialog\n      }\n      else {\n        component = QMenu\n        Object.assign(data, {\n          target: props.target,\n          contextMenu: props.contextMenu,\n          noParentEvent: true,\n          separateClosePopup: true\n        })\n      }\n\n      return h(component, data, () => def)\n    }\n  }\n})\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n"],"sourceRoot":""}