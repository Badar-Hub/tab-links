{"version":3,"sources":["webpack:///./src/domain/accounts/AccountsService.ts","webpack:///./src/domain/products/ProductService.ts","webpack:///./src/domain/accounts/invoices/newInvoice.vue","webpack:///./src/domain/accounts/invoices/InvoiceProduct.vue","webpack:///./src/domain/accounts/invoices/InvoiceProduct.vue?6a41","webpack:///./src/domain/accounts/invoices/InvoiceProduct.vue?a763","webpack:///./src/domain/accounts/invoices/newInvoice.vue?238e","webpack:///./src/domain/accounts/invoices/newInvoice.vue?2370","webpack:///./src/domain/customers/CustomerService.ts"],"names":["AccountsService","get","baseUrl","data","results","console","log","name","filteredInvoice","paymentReceving","post","invoice","put","_id","ProductService","product","class","onSubmit","newInvoice","customerName","disable","isEditable","label","options","customerList","filled","invoiceNo","date","mask","rules","append","ref","transition-show","transition-hide","color","flat","reference","products","index","key","removeProduct","productsList","diableNewProduct","addAnotherProduct","isTotalValue","totalValue","calculateTotal","type","inputValue","$emit","quantity","productData","discount","icon","unelevated","rounded","props","Object","Array","emits","setup","context","sku","brand","category","price","costPrice","set","val","emit","render","QSelect","QInput","QBtn","components","InvoiceProduct","totalValueArr","value","length","forEach","filter","p","prod","find","productFind","push","reduce","a","b","_","i","generateInvoiceNo","getInvoices","resetForm","setToEdit","getProducts","map","CustomerService","getCustomers","customers","customer","QForm","QIcon","QPopupProxy","QDate","QCard","QCardSection","ClosePopup","id"],"mappings":"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","file":"js/chunk-40a0b5e8.f2206c30.js","sourcesContent":["import { ApiService } from '@/services/ApiServices';\nimport InvoiceModel from './InvoiceModel';\nimport NewInvoiceModel from './NewInvoiceModel';\n\nexport default class AccountsService {\n  static baseUrl = 'accounts';\n\n  static async getAllInvoices() {\n    try {\n      const data = await ApiService.get(\n        `${AccountsService.baseUrl}/all-invoices`\n      );\n      return data.results.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  static async getInvoice(name: string) {\n    try {\n      const data = await ApiService.get(\n        `${AccountsService.baseUrl}/invoices/${name}`\n      );\n      return data.results.data.filteredInvoice;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  static async getInvoices() {\n    try {\n      const data = await ApiService.get(\n        `${AccountsService.baseUrl}/invoices`\n      );\n      return data.results.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  static async newPaymentReceving(paymentReceving: InvoiceModel) {\n    try {\n      const data = await ApiService.post(\n        `${AccountsService.baseUrl}`,\n        paymentReceving\n      );\n      return data.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  static async newInvoice(invoice: NewInvoiceModel) {\n    try {\n      const data = await ApiService.post(`${AccountsService.baseUrl}/create-invoice`, invoice);\n      return data.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  static async updateBrand(paymentReceving: InvoiceModel) {\n    try {\n      const data = await ApiService.put(\n        `${AccountsService.baseUrl}/${paymentReceving._id}`,\n        paymentReceving\n      );\n      return data.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","import { ApiService } from \"@/services/ApiServices\";\nimport ProductModel from \"./ProductModel\";\n\nexport default class ProductService {\n  static baseUrl = \"products\";\n  static async getProducts() {\n    try {\n      const data = await ApiService.get(ProductService.baseUrl);\n      return data.results.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  static async newProducts(product: ProductModel) {\n    try {\n      const data = await ApiService.post(`${ProductService.baseUrl}`, product);\n      return data.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  static async updateProduct(product: ProductModel) {\n    try {\n      const data = await ApiService.put(\n        `${ProductService.baseUrl}/${product._id}`,\n        product\n      );\n      return data.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","<template>\n  <div>\n    <div class=\"row q-px-md\">\n      <div class=\"col-xs-12 col-sm-6\">\n        <h6 class=\"q-my-sm\">New Invoice</h6>\n      </div>\n    </div>\n    <q-form class=\"row full-width\" @submit=\"onSubmit\">\n      <div class=\"col col-xs-12 col-sm-6 q-my-sm q-px-md\">\n        <q-select\n          v-model=\"newInvoice.customerName\"\n          :disable=\"!isEditable\"\n          label=\"Select Customer\"\n          :options=\"customerList\"\n          filled\n        />\n      </div>\n      <div class=\"col col-xs-12 col-sm-6 q-my-sm q-px-md\">\n        <q-input\n          disable\n          v-model=\"newInvoice.invoiceNo\"\n          label=\"Invoice Number\"\n          filled\n        />\n      </div>\n      <div class=\"col col-xs-12 col-sm-6 q-my-sm q-px-md\">\n        <q-input\n          :disable=\"!isEditable\"\n          filled\n          v-model=\"newInvoice.date\"\n          mask=\"date\"\n          :rules=\"['date']\"\n        >\n          <template v-slot:append>\n            <q-icon name=\"event\" class=\"cursor-pointer\">\n              <q-popup-proxy\n                ref=\"qDateProxy\"\n                transition-show=\"scale\"\n                transition-hide=\"scale\"\n              >\n                <q-date v-model=\"newInvoice.date\">\n                  <div class=\"row items-center justify-end\">\n                    <q-btn v-close-popup label=\"Close\" color=\"primary\" flat />\n                  </div>\n                </q-date>\n              </q-popup-proxy>\n            </q-icon>\n          </template>\n        </q-input>\n      </div>\n      <div class=\"col col-xs-12 col-sm-6 q-my-sm q-px-md\">\n        <q-input\n          :disable=\"!isEditable\"\n          v-model=\"newInvoice.reference\"\n          label=\"Reference\"\n          filled\n        />\n      </div>\n      <div class=\"col col-xs-12 q-my-sm q-px-md\">\n        <q-card>\n          <q-card-section>\n            <div\n              class=\"q-my-sm\"\n              v-for=\"(product, index) in newInvoice.products\"\n              :key=\"index\"\n            >\n              <InvoiceProduct\n                @removeProduct=\"removeProduct(index)\"\n                :products=\"productsList\"\n                :invoice=\"product\"\n              />\n            </div>\n          </q-card-section>\n        </q-card>\n      </div>\n      <div class=\"col-xs-12 q-px-md\">\n        <q-btn\n          :disable=\"diableNewProduct\"\n          label=\"Add Another Product\"\n          @click=\"addAnotherProduct\"\n        />\n      </div>\n      <div v-if=\"isTotalValue\" class=\"col-xs-12 text-right q-my-sm q-px-xl\">\n        <h6 class=\"q-my-sm\">Rs: {{ newInvoice.totalValue }}</h6>\n      </div>\n      <div class=\"col-xs-12 text-right q-my-sm q-px-xl\">\n        <q-btn\n          @click=\"calculateTotal\"\n          label=\"Calculate Total Price\"\n          color=\"primary\"\n        />\n      </div>\n      <div class=\"col-xs-12 q-px-md text-right\">\n        <q-btn label=\"Create Invoice\" color=\"primary\" type=\"submit\" />\n      </div>\n    </q-form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { ref, defineComponent, onMounted, watch } from 'vue';\nimport CustomerService from '../../customers/CustomerService';\nimport CustomerModel from '../../customers/CustomerModel';\nimport ProductModel from '../../products/ProductModel';\nimport ProductService from '../../products/ProductService';\nimport NewInvoiceModel from '../NewInvoiceModel';\nimport InvoiceProduct from './InvoiceProduct.vue';\nimport AccountsService from '../AccountsService';\n\nexport default defineComponent({\n  components: { InvoiceProduct },\n  setup() {\n    const newInvoice = ref<NewInvoiceModel>({\n      customerName: '',\n      invoiceNo: 0,\n      date: '2021-08-28',\n      reference: '',\n      products: [\n        {\n          name: '',\n          quantity: 1,\n        },\n      ],\n      totalValue: 0,\n    });\n    const totalValue = ref(0);\n    const productsList = ref<Array<string>>([]);\n    const products = ref<ProductModel[]>([]);\n    const customerList = ref([]);\n    const totalValueArr = ref<Array<number>>([]);\n    const isTotalValue = ref(false);\n    const isEditable = ref(true);\n    const diableNewProduct = ref(false);\n\n    watch(\n      () => newInvoice.value.products.length,\n      () => {\n        newInvoice.value.products.forEach((product) => {\n          productsList.value = productsList.value.filter(\n            (p) => p != product.name\n          );\n        });\n      }\n    );\n\n    watch(\n      () => productsList.value,\n      () => {\n        diableNewProduct.value = productsList.value.length - 1 ? false : true;\n        console.log(productsList.value, productsList.value.length);\n      }\n    );\n\n    const calculateTotal = () => {\n      isTotalValue.value = true;\n      newInvoice.value.totalValue = 0;\n      totalValueArr.value = [];\n      newInvoice.value.products.forEach((product) => {\n        const prod = products.value.find(\n          (productFind) => productFind.name === product.name\n        );\n        if (prod && prod.discount) {\n          totalValueArr.value.push(\n            prod.discount\n              ? prod.discount * product.quantity\n              : prod.price * product.quantity\n          );\n        }\n      });\n      newInvoice.value.totalValue = totalValueArr.value.reduce(\n        (a: number, b: number) => a + b\n      );\n      console.log(newInvoice.value.totalValue);\n    };\n\n    const addAnotherProduct = () => {\n      newInvoice.value.products.push({\n        name: '',\n        quantity: 1,\n      });\n    };\n\n    const removeProduct = (index: number) => {\n      newInvoice.value.products = newInvoice.value.products.filter(\n        (_, i) => i !== index\n      );\n    };\n\n    const generateInvoiceNo = async () => {\n      try {\n        const data = await AccountsService.getInvoices();\n        newInvoice.value.invoiceNo = data.length;\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    const resetForm = () => {\n      isEditable.value = false;\n      newInvoice.value._id = '';\n      newInvoice.value.customerName = '';\n      newInvoice.value.date = '28-08-2021';\n      newInvoice.value.reference = '';\n      newInvoice.value.products = [];\n      newInvoice.value.totalValue = 0;\n    };\n\n    const setToEdit = (invoice: NewInvoiceModel) => {\n      isEditable.value = false;\n      newInvoice.value._id = invoice._id;\n      newInvoice.value.customerName = invoice.customerName;\n      newInvoice.value.invoiceNo = invoice.invoiceNo;\n      newInvoice.value.date = invoice.date;\n      newInvoice.value.reference = invoice.reference;\n      newInvoice.value.products = invoice.products;\n      newInvoice.value.totalValue = invoice.totalValue;\n\n      console.log(newInvoice.value);\n    };\n\n    const onSubmit = async () => {\n      try {\n        generateInvoiceNo();\n        await AccountsService.newInvoice(newInvoice.value);\n        resetForm();\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    onMounted(async () => {\n      try {\n        generateInvoiceNo();\n        products.value = await ProductService.getProducts();\n        productsList.value = products.value.map(\n          (product: ProductModel) => product.name\n        );\n        const customers = await CustomerService.getCustomers();\n        customerList.value = customers.map(\n          (customer: CustomerModel) => customer.name\n        );\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    return {\n      newInvoice,\n      productsList,\n      addAnotherProduct,\n      customerList,\n      removeProduct,\n      totalValue,\n      products,\n      calculateTotal,\n      isTotalValue,\n      onSubmit,\n      setToEdit,\n      isEditable,\n      diableNewProduct,\n    };\n  },\n});\n</script>\n","<template>\n  <div>\n    <div class=\"row full-width\">\n      <div class=\"col-xs-12 col-sm-4 q-my-sm q-px-md\">\n        <q-select\n          label=\"Select Product\"\n          v-model=\"inputValue.name\"\n          :options=\"products\"\n          @input:invoice=\"$emit('input', invoice)\"\n        />\n      </div>\n      <div class=\"col-xs-12 col-sm-2 q-my-sm q-px-md\">\n        <q-input\n          type=\"number\"\n          label=\"Quantity\"\n          v-model.number=\"inputValue.quantity\"\n          @input=\"$emit('input', invoice)\"\n        />\n      </div>\n      <div class=\"col-xs-12 col-sm-2 q-my-sm q-px-md q-my-auto\">\n        Discount\n        <p class=\"q-my-auto\">\n          {{\n            productData.discount\n              ? productData.discount * inputValue.quantity\n              : productData.price * inputValue.quantity\n          }}\n        </p>\n      </div>\n      <div class=\"col-xs-12 col-sm-2 q-my-sm q-px-md\">\n        <q-input\n          disable\n          type=\"number\"\n          label=\"Discount\"\n          v-model.number=\"productData.discount\"\n        />\n      </div>\n      <div class=\"col-xs-12 col-sm-2 q-my-auto q-px-md\">\n        <q-btn\n          icon=\"close\"\n          unelevated\n          flat\n          rounded\n          color=\"red\"\n          @click=\"$emit('remove-product')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed } from 'vue';\n\nimport NewProductModel from './ProductInvoiceModel';\n\nexport default defineComponent({\n  props: {\n    invoice: {\n      type: Object as PropType<NewProductModel>,\n    },\n    products: {\n      type: Array,\n    },\n  },\n  emits: ['remove-product', 'update:modelValue'],\n  setup(props, context) {\n    const productData = ref<any>({\n      sku: '',\n      name: '',\n      brand: '',\n      category: '',\n      price: 0,\n      discount: 0,\n      costPrice: 0,\n      quantity: 0,\n    });\n\n    const inputValue = computed({\n      get: () => props.invoice,\n      set: (val) => context.emit('update:modelValue', val),\n    });\n\n    return {\n      productData,\n      inputValue,\n    };\n  },\n});\n</script>\n","\nimport { defineComponent, PropType, ref, computed } from 'vue';\n\nimport NewProductModel from './ProductInvoiceModel';\n\nexport default defineComponent({\n  props: {\n    invoice: {\n      type: Object as PropType<NewProductModel>,\n    },\n    products: {\n      type: Array,\n    },\n  },\n  emits: ['remove-product', 'update:modelValue'],\n  setup(props, context) {\n    const productData = ref<any>({\n      sku: '',\n      name: '',\n      brand: '',\n      category: '',\n      price: 0,\n      discount: 0,\n      costPrice: 0,\n      quantity: 0,\n    });\n\n    const inputValue = computed({\n      get: () => props.invoice,\n      set: (val) => context.emit('update:modelValue', val),\n    });\n\n    return {\n      productData,\n      inputValue,\n    };\n  },\n});\n","import { render } from \"./InvoiceProduct.vue?vue&type=template&id=4ff75f65\"\nimport script from \"./InvoiceProduct.vue?vue&type=script&lang=ts\"\nexport * from \"./InvoiceProduct.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script\nimport QSelect from 'quasar/src/components/select/QSelect.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(script, 'components', {QSelect,QInput,QBtn});\n","\nimport { ref, defineComponent, onMounted, watch } from 'vue';\nimport CustomerService from '../../customers/CustomerService';\nimport CustomerModel from '../../customers/CustomerModel';\nimport ProductModel from '../../products/ProductModel';\nimport ProductService from '../../products/ProductService';\nimport NewInvoiceModel from '../NewInvoiceModel';\nimport InvoiceProduct from './InvoiceProduct.vue';\nimport AccountsService from '../AccountsService';\n\nexport default defineComponent({\n  components: { InvoiceProduct },\n  setup() {\n    const newInvoice = ref<NewInvoiceModel>({\n      customerName: '',\n      invoiceNo: 0,\n      date: '2021-08-28',\n      reference: '',\n      products: [\n        {\n          name: '',\n          quantity: 1,\n        },\n      ],\n      totalValue: 0,\n    });\n    const totalValue = ref(0);\n    const productsList = ref<Array<string>>([]);\n    const products = ref<ProductModel[]>([]);\n    const customerList = ref([]);\n    const totalValueArr = ref<Array<number>>([]);\n    const isTotalValue = ref(false);\n    const isEditable = ref(true);\n    const diableNewProduct = ref(false);\n\n    watch(\n      () => newInvoice.value.products.length,\n      () => {\n        newInvoice.value.products.forEach((product) => {\n          productsList.value = productsList.value.filter(\n            (p) => p != product.name\n          );\n        });\n      }\n    );\n\n    watch(\n      () => productsList.value,\n      () => {\n        diableNewProduct.value = productsList.value.length - 1 ? false : true;\n        console.log(productsList.value, productsList.value.length);\n      }\n    );\n\n    const calculateTotal = () => {\n      isTotalValue.value = true;\n      newInvoice.value.totalValue = 0;\n      totalValueArr.value = [];\n      newInvoice.value.products.forEach((product) => {\n        const prod = products.value.find(\n          (productFind) => productFind.name === product.name\n        );\n        if (prod && prod.discount) {\n          totalValueArr.value.push(\n            prod.discount\n              ? prod.discount * product.quantity\n              : prod.price * product.quantity\n          );\n        }\n      });\n      newInvoice.value.totalValue = totalValueArr.value.reduce(\n        (a: number, b: number) => a + b\n      );\n      console.log(newInvoice.value.totalValue);\n    };\n\n    const addAnotherProduct = () => {\n      newInvoice.value.products.push({\n        name: '',\n        quantity: 1,\n      });\n    };\n\n    const removeProduct = (index: number) => {\n      newInvoice.value.products = newInvoice.value.products.filter(\n        (_, i) => i !== index\n      );\n    };\n\n    const generateInvoiceNo = async () => {\n      try {\n        const data = await AccountsService.getInvoices();\n        newInvoice.value.invoiceNo = data.length;\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    const resetForm = () => {\n      isEditable.value = false;\n      newInvoice.value._id = '';\n      newInvoice.value.customerName = '';\n      newInvoice.value.date = '28-08-2021';\n      newInvoice.value.reference = '';\n      newInvoice.value.products = [];\n      newInvoice.value.totalValue = 0;\n    };\n\n    const setToEdit = (invoice: NewInvoiceModel) => {\n      isEditable.value = false;\n      newInvoice.value._id = invoice._id;\n      newInvoice.value.customerName = invoice.customerName;\n      newInvoice.value.invoiceNo = invoice.invoiceNo;\n      newInvoice.value.date = invoice.date;\n      newInvoice.value.reference = invoice.reference;\n      newInvoice.value.products = invoice.products;\n      newInvoice.value.totalValue = invoice.totalValue;\n\n      console.log(newInvoice.value);\n    };\n\n    const onSubmit = async () => {\n      try {\n        generateInvoiceNo();\n        await AccountsService.newInvoice(newInvoice.value);\n        resetForm();\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    onMounted(async () => {\n      try {\n        generateInvoiceNo();\n        products.value = await ProductService.getProducts();\n        productsList.value = products.value.map(\n          (product: ProductModel) => product.name\n        );\n        const customers = await CustomerService.getCustomers();\n        customerList.value = customers.map(\n          (customer: CustomerModel) => customer.name\n        );\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    return {\n      newInvoice,\n      productsList,\n      addAnotherProduct,\n      customerList,\n      removeProduct,\n      totalValue,\n      products,\n      calculateTotal,\n      isTotalValue,\n      onSubmit,\n      setToEdit,\n      isEditable,\n      diableNewProduct,\n    };\n  },\n});\n","import { render } from \"./newInvoice.vue?vue&type=template&id=627bc0c2\"\nimport script from \"./newInvoice.vue?vue&type=script&lang=ts\"\nexport * from \"./newInvoice.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script\nimport QForm from 'quasar/src/components/form/QForm.js';\nimport QSelect from 'quasar/src/components/select/QSelect.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QPopupProxy from 'quasar/src/components/popup-proxy/QPopupProxy.js';\nimport QDate from 'quasar/src/components/date/QDate.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QCard from 'quasar/src/components/card/QCard.js';\nimport QCardSection from 'quasar/src/components/card/QCardSection.js';import ClosePopup from 'quasar/src/directives/ClosePopup.js';\nimport qInstall from \"../../../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(script, 'components', {QForm,QSelect,QInput,QIcon,QPopupProxy,QDate,QBtn,QCard,QCardSection});qInstall(script, 'directives', {ClosePopup});\n","import { ApiService } from \"@/services/ApiServices\";\nimport CustomerModel from './CustomerModel';\n\nexport default class CustomerService {\n    static baseUrl = \"customers\";\n    static async getCustomers() {\n        try {\n            const data = await ApiService.get(CustomerService.baseUrl);\n            return data.results.data;\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    static async getCustomer(id: string) {\n        try {\n            const data = await ApiService.get(`${CustomerService.baseUrl}/${id}`);\n            return data.results.data;\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    static async newCustomer(customer: CustomerModel) {\n        try {\n            const data = await ApiService.post(`${CustomerService.baseUrl}`, customer);\n            return data.data;\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    static async updateCustomer(customer: CustomerModel) {\n        try {\n            const data = await ApiService.put(`${CustomerService.baseUrl}/${customer._id}`, customer);\n            return data.data;\n        } catch (error) {\n            console.log(error);\n        }\n    }\n}\n"],"sourceRoot":""}