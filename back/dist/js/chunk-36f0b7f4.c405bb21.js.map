{"version":3,"sources":["webpack:///./node_modules/quasar/src/components/form/QForm.js","webpack:///./node_modules/quasar/src/composables/private/use-cache.js","webpack:///./node_modules/quasar/src/utils/private/date-persian.js","webpack:///./node_modules/quasar/src/components/date/use-datetime.js","webpack:///./node_modules/quasar/src/utils/date.js","webpack:///./node_modules/quasar/src/components/date/QDate.js","webpack:///./node_modules/quasar/src/components/popup-proxy/QPopupProxy.js","webpack:///./node_modules/quasar/src/directives/ClosePopup.js","webpack:///./node_modules/core-js/modules/es.array.fill.js"],"names":["defineComponent","name","props","autofocus","Boolean","noErrorFocus","noResetFocus","greedy","onSubmit","Function","emits","setup","slots","emit","vm","getCurrentInstance","rootRef","ref","validateIndex","registeredComponents","validate","shouldFocus","promises","focus","emitEvent","res","i","comp","valid","then","push","error","Promise","resolve","length","index","all","errors","filter","r","resetValidation","forEach","submit","evt","stopAndPrevent","val","target","reset","nextTick","addFocusFn","value","querySelector","Array","prototype","find","call","querySelectorAll","el","tabIndex","provide","formKey","bindComponent","vmProxy","unbindComponent","indexOf","splice","onMounted","Object","assign","proxy","getValidationComponents","h","class","onReset","hSlot","default","cache","Map","getCache","key","obj","getCacheWithFn","fn","breaks","toJalaali","gy","gm","gd","toString","getDate","getMonth","getFullYear","d2j","g2d","toGregorian","jy","jm","jd","d2g","j2d","isLeapJalaaliYear","jalCalLeap","jalaaliMonthLength","jump","leap","n","bl","jp","Error","div","mod","jalCal","withoutLeap","leapJ","leapG","march","jdn","k","jdn1f","d","j","a","b","calendars","useDatetimeProps","modelValue","required","mask","type","String","locale","calendar","validator","v","includes","landscape","color","textColor","square","flat","bordered","readonly","disable","useDatetimeEmits","getDayHash","date","year","pad","month","day","$q","editable","computed","tabindex","headerClass","cls","join","getLocale","lang","getCurrentDate","dateOnly","Date","timeFill","jDate","hour","minute","second","millisecond","MILLISECONDS_IN_DAY","MILLISECONDS_IN_HOUR","MILLISECONDS_IN_MINUTE","defaultMask","token","reverseToken","regexStore","getRegexData","dateLocale","days","daysShort","months","monthsShort","map","regexText","replace","match","YY","YYYY","M","MMM","MMMM","D","H","m","s","S","A","aa","Z","ZZ","X","x","substring","regex","RegExp","__splitDate","str","defaultModel","timezoneOffset","dateHash","timeHash","langOpts","tzString","stamp","parseInt","isNaN","getHours","getMinutes","getSeconds","getMilliseconds","y","maxDay","slice","formatTimezone","offset","delimeter","sign","absOffset","Math","abs","hours","floor","minutes","getWeekOfYear","thursday","setDate","getDay","firstThursday","ds","getTimezoneOffset","setHours","weekDiff","startOfDate","unit","utc","t","prefix","getDiff","sub","interval","getTime","getDateDiff","subtract","getDayOfYear","getOrdinal","formatter","_","forcedYear","this","MM","Q","ceil","Qo","Do","DD","DDD","DDDD","dd","dddd","ddd","E","w","ww","HH","hh","mm","ss","SS","SSS","forcedTimezoneOffset","tzOffset","formatDate","__forcedYear","__forcedTimezoneOffset","Infinity","text","split","yearsInterval","views","viewIsValid","yearMonthValidator","test","lineStr","getMonthHash","useFormProps","useDarkProps","multiple","range","title","subtitle","defaultYearMonth","yearsInMonthView","events","eventColor","emitImmediately","options","navigationMinYearMonth","navigationMaxYearMonth","noUnset","firstDayOfWeek","Number","todayBtn","minimal","defaultView","lastEmitValue","isDark","useDark","useCache","useDatetime","formAttrs","useFormAttrs","injectFormInput","useFormInject","blurTargetRef","innerMask","getMask","innerLocale","today","viewModel","getViewModel","view","direction","rtl","monthDirection","yearDirection","startYear","editRange","classes","computedColor","computedTextColor","isImmediate","normalizedModel","isArray","daysModel","decodeString","rangeModel","from","to","getNativeDateFn","model","gDate","encodeObjectFn","daysInModel","reduce","acc","headerTitle","init","pluralDay","valueOf","minSelectedModel","concat","sort","maxSelectedModel","headerSubtitle","dateArrow","iconSet","datetime","arrowLeft","arrowRight","reverse","computedFirstDayOfWeek","daysOfWeek","first","daysInMonth","evtColor","minNav","data","maxNav","navBoundaries","prev","next","daysMap","entry","hash","rangeMap","hashFrom","hashTo","cur","rangeView","initHash","final","finalHash","fromHash","toHash","viewMonthHash","includeFrom","includeTo","selectionDaysMap","dayHash","eventDaysMap","viewDays","endDay","prevJM","prevJY","len","fill","event","in","selected","unelevated","rangeFrom","rangeTo","editRangeFrom","editRangeTo","left","afterDays","attributes","setToday","toggleDate","setCalendarTo","setView","viewMode","offsetCalendar","descending","goToMonth","goToYear","updateViewModel","setEditingRange","getDefaultViewModel","decoded","setYear","setMonth","monthHash","removeFromModel","addToModel","getShortDate","newHash","emitValue","action","getEmitParams","reason","details","min","max","encodeEntry","ranges","updateValue","getHeader","Transition","onClick","onKeyup","e","keyCode","QBtn","icon","size","round","getNavigation","label","dir","goTo","boundaries","dense","noCaps","watch","renderViews","Calendar","onDayClick","onMouseover","onDayMouseover","Months","currentYear","isDisabled","content","active","unshift","Years","start","stop","years","dayIndex","dayProps","payload","def","useAnchorProps","breakpoint","attrs","showing","popupRef","useAnchor","canShow","getType","screen","width","height","onShow","onHide","show","hide","toggle","component","popupProps","cover","maxHeight","QDialog","QMenu","contextMenu","noParentEvent","separateClosePopup","getDepth","depth","__QUASAR_SSR_SERVER__","beforeMount","ctx","handler","setTimeout","getPortalVm","closePortals","handlerKey","isKeyCode","__qclosepopup","addEventListener","updated","oldValue","beforeUnmount","removeEventListener","$","addToUnscopables","proto"],"mappings":"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","file":"js/chunk-36f0b7f4.c405bb21.js","sourcesContent":["import { h, defineComponent, ref, onMounted, getCurrentInstance, nextTick, provide } from 'vue'\n\nimport { stopAndPrevent } from '../../utils/event.js'\nimport { addFocusFn } from '../../utils/private/focus-manager.js'\nimport { hSlot } from '../../utils/private/render.js'\nimport { formKey } from '../../utils/private/symbols.js'\n\nexport default defineComponent({\n  name: 'QForm',\n\n  props: {\n    autofocus: Boolean,\n    noErrorFocus: Boolean,\n    noResetFocus: Boolean,\n    greedy: Boolean,\n\n    onSubmit: Function\n  },\n\n  emits: [ 'reset', 'validation-success', 'validation-error' ],\n\n  setup (props, { slots, emit }) {\n    const vm = getCurrentInstance()\n    const rootRef = ref(null)\n\n    let validateIndex = 0\n    const registeredComponents = []\n\n    function validate (shouldFocus) {\n      const promises = []\n      const focus = typeof shouldFocus === 'boolean'\n        ? shouldFocus\n        : props.noErrorFocus !== true\n\n      validateIndex++\n\n      const emitEvent = (res, ref) => {\n        emit('validation-' + (res === true ? 'success' : 'error'), ref)\n      }\n\n      for (let i = 0; i < registeredComponents.length; i++) {\n        const comp = registeredComponents[ i ]\n        const valid = comp.validate()\n\n        if (typeof valid.then === 'function') {\n          promises.push(\n            valid.then(\n              valid => ({ valid, comp }),\n              error => ({ valid: false, comp, error })\n            )\n          )\n        }\n        else if (valid !== true) {\n          if (props.greedy === false) {\n            emitEvent(false, comp)\n\n            if (focus === true && typeof comp.focus === 'function') {\n              comp.focus()\n            }\n\n            return Promise.resolve(false)\n          }\n\n          promises.push({ valid: false, comp })\n        }\n      }\n\n      if (promises.length === 0) {\n        emitEvent(true)\n        return Promise.resolve(true)\n      }\n\n      const index = validateIndex\n\n      return Promise.all(promises).then(\n        res => {\n          if (index === validateIndex) {\n            const errors = res.filter(r => r.valid !== true)\n\n            if (errors.length === 0) {\n              emitEvent(true)\n              return true\n            }\n\n            const { valid, comp } = errors[ 0 ]\n\n            emitEvent(false, comp)\n\n            if (\n              focus === true\n              && valid !== true\n              && typeof comp.focus === 'function'\n            ) {\n              comp.focus()\n            }\n\n            return false\n          }\n        }\n      )\n    }\n\n    function resetValidation () {\n      validateIndex++\n\n      registeredComponents.forEach(comp => {\n        typeof comp.resetValidation === 'function' && comp.resetValidation()\n      })\n    }\n\n    function submit (evt) {\n      evt !== void 0 && stopAndPrevent(evt)\n\n      validate().then(val => {\n        if (val === true) {\n          if (props.onSubmit !== void 0) {\n            emit('submit', evt)\n          }\n          else if (evt !== void 0 && evt.target !== void 0 && typeof evt.target.submit === 'function') {\n            evt.target.submit()\n          }\n        }\n      })\n    }\n\n    function reset (evt) {\n      evt !== void 0 && stopAndPrevent(evt)\n\n      emit('reset')\n\n      nextTick(() => { // allow userland to reset values before\n        resetValidation()\n        if (props.autofocus === true && props.noResetFocus !== true) {\n          focus()\n        }\n      })\n    }\n\n    function focus () {\n      addFocusFn(() => {\n        if (rootRef.value === null) { return }\n\n        const target = rootRef.value.querySelector('[autofocus], [data-autofocus]')\n          || Array.prototype.find.call(rootRef.value.querySelectorAll('[tabindex]'), el => el.tabIndex > -1)\n\n        target !== null && target !== void 0 && target.focus()\n      })\n    }\n\n    provide(formKey, {\n      bindComponent (vmProxy) {\n        registeredComponents.push(vmProxy)\n      },\n\n      unbindComponent (vmProxy) {\n        const index = registeredComponents.indexOf(vmProxy)\n        if (index > -1) {\n          registeredComponents.splice(index, 1)\n        }\n      }\n    })\n\n    onMounted(() => {\n      props.autofocus === true && focus()\n    })\n\n    // expose public methods\n    Object.assign(vm.proxy, {\n      validate,\n      resetValidation,\n      submit,\n      reset,\n      focus,\n      getValidationComponents: () => registeredComponents\n    })\n\n    return () => h('form', {\n      class: 'q-form',\n      ref: rootRef,\n      onSubmit: submit,\n      onReset: reset\n    }, hSlot(slots.default))\n  }\n})\n","export default function () {\n  const cache = new Map()\n\n  return {\n    getCache: __QUASAR_SSR_SERVER__\n      ? function (_, obj) { return obj }\n      : function (key, obj) {\n        return cache[ key ] === void 0\n          ? (cache[ key ] = obj)\n          : cache[ key ]\n      },\n\n    getCacheWithFn: __QUASAR_SSR_SERVER__\n      ? function (_, fn) { return fn() }\n      : function (key, fn) {\n        return cache[ key ] === void 0\n          ? (cache[ key ] = fn())\n          : cache[ key ]\n      }\n  }\n}\n","// taken from https://github.com/jalaali/jalaali-js\n\n/*\n  Jalaali years starting the 33-year rule.\n*/\nconst breaks = [\n  -61, 9, 38, 199, 426, 686, 756, 818, 1111, 1181, 1210,\n  1635, 2060, 2097, 2192, 2262, 2324, 2394, 2456, 3178\n]\n\n/*\n  Converts a Gregorian date to Jalaali.\n*/\nexport function toJalaali (gy, gm, gd) {\n  if (Object.prototype.toString.call(gy) === '[object Date]') {\n    gd = gy.getDate()\n    gm = gy.getMonth() + 1\n    gy = gy.getFullYear()\n  }\n  return d2j(g2d(gy, gm, gd))\n}\n\n/*\n  Converts a Jalaali date to Gregorian.\n*/\nexport function toGregorian (jy, jm, jd) {\n  return d2g(j2d(jy, jm, jd))\n}\n\n/*\n  Checks whether a Jalaali date is valid or not.\n*/\nexport function isValidJalaaliDate (jy, jm, jd) {\n  return jy >= -61 && jy <= 3177\n          && jm >= 1 && jm <= 12\n          && jd >= 1 && jd <= jalaaliMonthLength(jy, jm)\n}\n\n/*\n  Is this a leap year or not?\n*/\nfunction isLeapJalaaliYear (jy) {\n  return jalCalLeap(jy) === 0\n}\n\n/*\n  Number of days in a given month in a Jalaali year.\n*/\nexport function jalaaliMonthLength (jy, jm) {\n  if (jm <= 6) return 31\n  if (jm <= 11) return 30\n  if (isLeapJalaaliYear(jy)) return 30\n  return 29\n}\n\n/*\n    This function determines if the Jalaali (Persian) year is\n    leap (366-day long) or is the common year (365 days)\n\n    @param jy Jalaali calendar year (-61 to 3177)\n    @returns number of years since the last leap year (0 to 4)\n */\nfunction jalCalLeap (jy) {\n  const bl = breaks.length\n  let\n    jp = breaks[ 0 ],\n    jm,\n    jump,\n    leap,\n    n,\n    i\n\n  if (jy < jp || jy >= breaks[ bl - 1 ]) { throw new Error('Invalid Jalaali year ' + jy) }\n\n  for (i = 1; i < bl; i += 1) {\n    jm = breaks[ i ]\n    jump = jm - jp\n    if (jy < jm) { break }\n    jp = jm\n  }\n  n = jy - jp\n\n  if (jump - n < 6) { n = n - jump + div(jump + 4, 33) * 33 }\n  leap = mod(mod(n + 1, 33) - 1, 4)\n  if (leap === -1) {\n    leap = 4\n  }\n\n  return leap\n}\n\n/*\n  This function determines if the Jalaali (Persian) year is\n  leap (366-day long) or is the common year (365 days), and\n  finds the day in March (Gregorian calendar) of the first\n  day of the Jalaali year (jy).\n\n  @param jy Jalaali calendar year (-61 to 3177)\n  @param withoutLeap when don't need leap (true or false) default is false\n  @return\n    leap: number of years since the last leap year (0 to 4)\n    gy: Gregorian year of the beginning of Jalaali year\n    march: the March day of Farvardin the 1st (1st day of jy)\n  @see: http://www.astro.uni.torun.pl/~kb/Papers/EMP/PersianC-EMP.htm\n  @see: http://www.fourmilab.ch/documents/calendar/\n*/\nfunction jalCal (jy, withoutLeap) {\n  const\n    bl = breaks.length,\n    gy = jy + 621\n  let\n    leapJ = -14,\n    jp = breaks[ 0 ],\n    jm,\n    jump,\n    leap,\n    n,\n    i\n\n  if (jy < jp || jy >= breaks[ bl - 1 ]) { throw new Error('Invalid Jalaali year ' + jy) }\n\n  // Find the limiting years for the Jalaali year jy.\n  for (i = 1; i < bl; i += 1) {\n    jm = breaks[ i ]\n    jump = jm - jp\n    if (jy < jm) { break }\n    leapJ = leapJ + div(jump, 33) * 8 + div(mod(jump, 33), 4)\n    jp = jm\n  }\n  n = jy - jp\n\n  // Find the number of leap years from AD 621 to the beginning\n  // of the current Jalaali year in the Persian calendar.\n  leapJ = leapJ + div(n, 33) * 8 + div(mod(n, 33) + 3, 4)\n  if (mod(jump, 33) === 4 && jump - n === 4) { leapJ += 1 }\n\n  // And the same in the Gregorian calendar (until the year gy).\n  const leapG = div(gy, 4) - div((div(gy, 100) + 1) * 3, 4) - 150\n\n  // Determine the Gregorian date of Farvardin the 1st.\n  const march = 20 + leapJ - leapG\n\n  // Find how many years have passed since the last leap year.\n  if (!withoutLeap) {\n    if (jump - n < 6) { n = n - jump + div(jump + 4, 33) * 33 }\n    leap = mod(mod(n + 1, 33) - 1, 4)\n    if (leap === -1) {\n      leap = 4\n    }\n  }\n\n  return {\n    leap: leap,\n    gy: gy,\n    march: march\n  }\n}\n\n/*\n  Converts a date of the Jalaali calendar to the Julian Day number.\n\n  @param jy Jalaali year (1 to 3100)\n  @param jm Jalaali month (1 to 12)\n  @param jd Jalaali day (1 to 29/31)\n  @return Julian Day number\n*/\nfunction j2d (jy, jm, jd) {\n  const r = jalCal(jy, true)\n  return g2d(r.gy, 3, r.march) + (jm - 1) * 31 - div(jm, 7) * (jm - 7) + jd - 1\n}\n\n/*\n  Converts the Julian Day number to a date in the Jalaali calendar.\n\n  @param jdn Julian Day number\n  @return\n    jy: Jalaali year (1 to 3100)\n    jm: Jalaali month (1 to 12)\n    jd: Jalaali day (1 to 29/31)\n*/\nfunction d2j (jdn) {\n  const gy = d2g(jdn).gy // Calculate Gregorian year (gy).\n  let\n    jy = gy - 621,\n    jd,\n    jm,\n    k\n  const\n    r = jalCal(jy, false),\n    jdn1f = g2d(gy, 3, r.march)\n\n  // Find number of days that passed since 1 Farvardin.\n  k = jdn - jdn1f\n  if (k >= 0) {\n    if (k <= 185) {\n      // The first 6 months.\n      jm = 1 + div(k, 31)\n      jd = mod(k, 31) + 1\n      return {\n        jy: jy,\n        jm: jm,\n        jd: jd\n      }\n    }\n    else {\n      // The remaining months.\n      k -= 186\n    }\n  }\n  else {\n    // Previous Jalaali year.\n    jy -= 1\n    k += 179\n    if (r.leap === 1) { k += 1 }\n  }\n  jm = 7 + div(k, 30)\n  jd = mod(k, 30) + 1\n  return {\n    jy: jy,\n    jm: jm,\n    jd: jd\n  }\n}\n\n/*\n  Calculates the Julian Day number from Gregorian or Julian\n  calendar dates. This integer number corresponds to the noon of\n  the date (i.e. 12 hours of Universal Time).\n  The procedure was tested to be good since 1 March, -100100 (of both\n  calendars) up to a few million years into the future.\n\n  @param gy Calendar year (years BC numbered 0, -1, -2, ...)\n  @param gm Calendar month (1 to 12)\n  @param gd Calendar day of the month (1 to 28/29/30/31)\n  @return Julian Day number\n*/\nfunction g2d (gy, gm, gd) {\n  let d = div((gy + div(gm - 8, 6) + 100100) * 1461, 4)\n      + div(153 * mod(gm + 9, 12) + 2, 5)\n      + gd - 34840408\n  d = d - div(div(gy + 100100 + div(gm - 8, 6), 100) * 3, 4) + 752\n  return d\n}\n\n/*\n  Calculates Gregorian and Julian calendar dates from the Julian Day number\n  (jdn) for the period since jdn=-34839655 (i.e. the year -100100 of both\n  calendars) to some millions years ahead of the present.\n\n  @param jdn Julian Day number\n  @return\n    gy: Calendar year (years BC numbered 0, -1, -2, ...)\n    gm: Calendar month (1 to 12)\n    gd: Calendar day of the month M (1 to 28/29/30/31)\n*/\nfunction d2g (jdn) {\n  let j = 4 * jdn + 139361631\n  j = j + div(div(4 * jdn + 183187720, 146097) * 3, 4) * 4 - 3908\n  const\n    i = div(mod(j, 1461), 4) * 5 + 308,\n    gd = div(mod(i, 153), 5) + 1,\n    gm = mod(div(i, 153), 12) + 1,\n    gy = div(j, 1461) - 100100 + div(8 - gm, 6)\n  return {\n    gy: gy,\n    gm: gm,\n    gd: gd\n  }\n}\n\n/*\n  Utility helper functions.\n*/\n\nfunction div (a, b) {\n  return ~~(a / b)\n}\n\nfunction mod (a, b) {\n  return a - ~~(a / b) * b\n}\n","import { computed } from 'vue'\n\nimport { toJalaali } from '../../utils/private/date-persian.js'\nimport { pad } from '../../utils/format.js'\n\nconst calendars = [ 'gregorian', 'persian' ]\n\nexport const useDatetimeProps = {\n  modelValue: {\n    required: true\n  },\n\n  mask: {\n    type: String\n  },\n  locale: Object,\n\n  calendar: {\n    type: String,\n    validator: v => calendars.includes(v),\n    default: 'gregorian'\n  },\n\n  landscape: Boolean,\n\n  color: String,\n  textColor: String,\n\n  square: Boolean,\n  flat: Boolean,\n  bordered: Boolean,\n\n  readonly: Boolean,\n  disable: Boolean\n}\n\nexport const useDatetimeEmits = [ 'update:modelValue' ]\n\nexport function getDayHash (date) {\n  return date.year + '/' + pad(date.month) + '/' + pad(date.day)\n}\n\nexport default function (props, $q) {\n  const editable = computed(() => {\n    return props.disable !== true && props.readonly !== true\n  })\n\n  const tabindex = computed(() => {\n    return props.editable === true ? 0 : -1\n  })\n\n  const headerClass = computed(() => {\n    const cls = []\n    props.color !== void 0 && cls.push(`bg-${ props.color }`)\n    props.textColor !== void 0 && cls.push(`text-${ props.textColor }`)\n    return cls.join(' ')\n  })\n\n  function getLocale () {\n    return props.locale || $q.lang.date\n  }\n\n  function getCurrentDate (dateOnly) {\n    const d = new Date()\n    const timeFill = dateOnly === true ? null : 0\n\n    if (props.calendar === 'persian') {\n      const jDate = toJalaali(d)\n      return {\n        year: jDate.jy,\n        month: jDate.jm,\n        day: jDate.jd\n      }\n    }\n\n    return {\n      year: d.getFullYear(),\n      month: d.getMonth() + 1,\n      day: d.getDate(),\n      hour: timeFill,\n      minute: timeFill,\n      second: timeFill,\n      millisecond: timeFill\n    }\n  }\n\n  return {\n    editable,\n    tabindex,\n    headerClass,\n\n    getLocale,\n    getCurrentDate\n  }\n}\n","/* eslint no-fallthrough: 0 */\n\nimport { isDate } from './private/is.js'\nimport { pad, capitalize } from './format.js'\nimport { jalaaliMonthLength } from './private/date-persian.js'\nimport lang from '../lang.js'\n\nconst\n  MILLISECONDS_IN_DAY = 86400000,\n  MILLISECONDS_IN_HOUR = 3600000,\n  MILLISECONDS_IN_MINUTE = 60000,\n  defaultMask = 'YYYY-MM-DDTHH:mm:ss.SSSZ',\n  token = /\\[((?:[^\\]\\\\]|\\\\]|\\\\)*)\\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,\n  reverseToken = /(\\[[^\\]]*\\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\\s${}()|\\\\]+)/g,\n  regexStore = {}\n\nfunction getRegexData (mask, dateLocale) {\n  const\n    days = '(' + dateLocale.days.join('|') + ')',\n    key = mask + days\n\n  if (regexStore[ key ] !== void 0) {\n    return regexStore[ key ]\n  }\n\n  const\n    daysShort = '(' + dateLocale.daysShort.join('|') + ')',\n    months = '(' + dateLocale.months.join('|') + ')',\n    monthsShort = '(' + dateLocale.monthsShort.join('|') + ')'\n\n  const map = {}\n  let index = 0\n\n  const regexText = mask.replace(reverseToken, match => {\n    index++\n    switch (match) {\n      case 'YY':\n        map.YY = index\n        return '(-?\\\\d{1,2})'\n      case 'YYYY':\n        map.YYYY = index\n        return '(-?\\\\d{1,4})'\n      case 'M':\n        map.M = index\n        return '(\\\\d{1,2})'\n      case 'MM':\n        map.M = index // bumping to M\n        return '(\\\\d{2})'\n      case 'MMM':\n        map.MMM = index\n        return monthsShort\n      case 'MMMM':\n        map.MMMM = index\n        return months\n      case 'D':\n        map.D = index\n        return '(\\\\d{1,2})'\n      case 'Do':\n        map.D = index++ // bumping to D\n        return '(\\\\d{1,2}(st|nd|rd|th))'\n      case 'DD':\n        map.D = index // bumping to D\n        return '(\\\\d{2})'\n      case 'H':\n        map.H = index\n        return '(\\\\d{1,2})'\n      case 'HH':\n        map.H = index // bumping to H\n        return '(\\\\d{2})'\n      case 'h':\n        map.h = index\n        return '(\\\\d{1,2})'\n      case 'hh':\n        map.h = index // bumping to h\n        return '(\\\\d{2})'\n      case 'm':\n        map.m = index\n        return '(\\\\d{1,2})'\n      case 'mm':\n        map.m = index // bumping to m\n        return '(\\\\d{2})'\n      case 's':\n        map.s = index\n        return '(\\\\d{1,2})'\n      case 'ss':\n        map.s = index // bumping to s\n        return '(\\\\d{2})'\n      case 'S':\n        map.S = index\n        return '(\\\\d{1})'\n      case 'SS':\n        map.S = index // bump to S\n        return '(\\\\d{2})'\n      case 'SSS':\n        map.S = index // bump to S\n        return '(\\\\d{3})'\n      case 'A':\n        map.A = index\n        return '(AM|PM)'\n      case 'a':\n        map.a = index\n        return '(am|pm)'\n      case 'aa':\n        map.aa = index\n        return '(a\\\\.m\\\\.|p\\\\.m\\\\.)'\n\n      case 'ddd':\n        return daysShort\n      case 'dddd':\n        return days\n      case 'Q':\n      case 'd':\n      case 'E':\n        return '(\\\\d{1})'\n      case 'Qo':\n        return '(1st|2nd|3rd|4th)'\n      case 'DDD':\n      case 'DDDD':\n        return '(\\\\d{1,3})'\n      case 'w':\n        return '(\\\\d{1,2})'\n      case 'ww':\n        return '(\\\\d{2})'\n\n      case 'Z': // to split: (?:(Z)()()|([+-])?(\\\\d{2}):?(\\\\d{2}))\n        map.Z = index\n        return '(Z|[+-]\\\\d{2}:\\\\d{2})'\n      case 'ZZ':\n        map.ZZ = index\n        return '(Z|[+-]\\\\d{2}\\\\d{2})'\n\n      case 'X':\n        map.X = index\n        return '(-?\\\\d+)'\n      case 'x':\n        map.x = index\n        return '(-?\\\\d{4,})'\n\n      default:\n        index--\n        if (match[ 0 ] === '[') {\n          match = match.substring(1, match.length - 1)\n        }\n        return match.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n    }\n  })\n\n  const res = { map, regex: new RegExp('^' + regexText) }\n  regexStore[ key ] = res\n\n  return res\n}\n\nexport function extractDate (str, mask, dateLocale) {\n  const d = __splitDate(str, mask, dateLocale)\n\n  const date = new Date(\n    d.year,\n    d.month === null ? null : d.month - 1,\n    d.day,\n    d.hour,\n    d.minute,\n    d.second,\n    d.millisecond\n  )\n\n  const tzOffset = date.getTimezoneOffset()\n\n  return d.timezoneOffset === null || d.timezoneOffset === tzOffset\n    ? date\n    : getChange(date, { minutes: d.timezoneOffset - tzOffset }, true)\n}\n\nexport function __splitDate (str, mask, dateLocale, calendar, defaultModel) {\n  const date = {\n    year: null,\n    month: null,\n    day: null,\n    hour: null,\n    minute: null,\n    second: null,\n    millisecond: null,\n    timezoneOffset: null,\n    dateHash: null,\n    timeHash: null\n  }\n\n  defaultModel !== void 0 && Object.assign(date, defaultModel)\n\n  if (\n    str === void 0\n    || str === null\n    || str === ''\n    || typeof str !== 'string'\n  ) {\n    return date\n  }\n\n  if (mask === void 0) {\n    mask = defaultMask\n  }\n\n  const\n    langOpts = dateLocale !== void 0 ? dateLocale : lang.props.date,\n    months = langOpts.months,\n    monthsShort = langOpts.monthsShort\n\n  const { regex, map } = getRegexData(mask, langOpts)\n\n  const match = str.match(regex)\n\n  if (match === null) {\n    return date\n  }\n\n  let tzString = ''\n\n  if (map.X !== void 0 || map.x !== void 0) {\n    const stamp = parseInt(match[ map.X !== void 0 ? map.X : map.x ], 10)\n\n    if (isNaN(stamp) === true || stamp < 0) {\n      return date\n    }\n\n    const d = new Date(stamp * (map.X !== void 0 ? 1000 : 1))\n\n    date.year = d.getFullYear()\n    date.month = d.getMonth() + 1\n    date.day = d.getDate()\n    date.hour = d.getHours()\n    date.minute = d.getMinutes()\n    date.second = d.getSeconds()\n    date.millisecond = d.getMilliseconds()\n  }\n  else {\n    if (map.YYYY !== void 0) {\n      date.year = parseInt(match[ map.YYYY ], 10)\n    }\n    else if (map.YY !== void 0) {\n      const y = parseInt(match[ map.YY ], 10)\n      date.year = y < 0 ? y : 2000 + y\n    }\n\n    if (map.M !== void 0) {\n      date.month = parseInt(match[ map.M ], 10)\n      if (date.month < 1 || date.month > 12) {\n        return date\n      }\n    }\n    else if (map.MMM !== void 0) {\n      date.month = monthsShort.indexOf(match[ map.MMM ]) + 1\n    }\n    else if (map.MMMM !== void 0) {\n      date.month = months.indexOf(match[ map.MMMM ]) + 1\n    }\n\n    if (map.D !== void 0) {\n      date.day = parseInt(match[ map.D ], 10)\n\n      if (date.year === null || date.month === null || date.day < 1) {\n        return date\n      }\n\n      const maxDay = calendar !== 'persian'\n        ? (new Date(date.year, date.month, 0)).getDate()\n        : jalaaliMonthLength(date.year, date.month)\n\n      if (date.day > maxDay) {\n        return date\n      }\n    }\n\n    if (map.H !== void 0) {\n      date.hour = parseInt(match[ map.H ], 10) % 24\n    }\n    else if (map.h !== void 0) {\n      date.hour = parseInt(match[ map.h ], 10) % 12\n      if (\n        (map.A && match[ map.A ] === 'PM')\n        || (map.a && match[ map.a ] === 'pm')\n        || (map.aa && match[ map.aa ] === 'p.m.')\n      ) {\n        date.hour += 12\n      }\n      date.hour = date.hour % 24\n    }\n\n    if (map.m !== void 0) {\n      date.minute = parseInt(match[ map.m ], 10) % 60\n    }\n\n    if (map.s !== void 0) {\n      date.second = parseInt(match[ map.s ], 10) % 60\n    }\n\n    if (map.S !== void 0) {\n      date.millisecond = parseInt(match[ map.S ], 10) * 10 ** (3 - match[ map.S ].length)\n    }\n\n    if (map.Z !== void 0 || map.ZZ !== void 0) {\n      tzString = (map.Z !== void 0 ? match[ map.Z ].replace(':', '') : match[ map.ZZ ])\n      date.timezoneOffset = (tzString[ 0 ] === '+' ? -1 : 1) * (60 * tzString.slice(1, 3) + 1 * tzString.slice(3, 5))\n    }\n  }\n\n  date.dateHash = date.year + '/' + pad(date.month) + '/' + pad(date.day)\n  date.timeHash = pad(date.hour) + ':' + pad(date.minute) + ':' + pad(date.second) + tzString\n\n  return date\n}\n\nfunction formatTimezone (offset, delimeter = '') {\n  const\n    sign = offset > 0 ? '-' : '+',\n    absOffset = Math.abs(offset),\n    hours = Math.floor(absOffset / 60),\n    minutes = absOffset % 60\n\n  return sign + pad(hours) + delimeter + pad(minutes)\n}\n\nfunction setMonth (date, newMonth /* 1-based */) {\n  const\n    test = new Date(date.getFullYear(), newMonth, 0, 0, 0, 0, 0),\n    days = test.getDate()\n\n  date.setMonth(newMonth - 1, Math.min(days, date.getDate()))\n}\n\nfunction getChange (date, mod, add) {\n  const\n    t = new Date(date),\n    sign = (add ? 1 : -1)\n\n  Object.keys(mod).forEach(key => {\n    if (key === 'months') {\n      setMonth(t, t.getMonth() + 1 + sign * mod.months)\n      return\n    }\n\n    const op = key === 'years'\n      ? 'FullYear'\n      : capitalize(key === 'days' ? 'date' : key)\n    t[ `set${ op }` ](t[ `get${ op }` ]() + sign * mod[ key ])\n  })\n  return t\n}\n\nexport function isValid (date) {\n  return typeof date === 'number'\n    ? true\n    : isNaN(Date.parse(date)) === false\n}\n\nexport function buildDate (mod, utc) {\n  return adjustDate(new Date(), mod, utc)\n}\n\nexport function getDayOfWeek (date) {\n  const dow = new Date(date).getDay()\n  return dow === 0 ? 7 : dow\n}\n\nexport function getWeekOfYear (date) {\n  // Remove time components of date\n  const thursday = new Date(date.getFullYear(), date.getMonth(), date.getDate())\n\n  // Change date to Thursday same week\n  thursday.setDate(thursday.getDate() - ((thursday.getDay() + 6) % 7) + 3)\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  const firstThursday = new Date(thursday.getFullYear(), 0, 4)\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3)\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  const ds = thursday.getTimezoneOffset() - firstThursday.getTimezoneOffset()\n  thursday.setHours(thursday.getHours() - ds)\n\n  // Number of weeks between target Thursday and first Thursday\n  const weekDiff = (thursday - firstThursday) / (MILLISECONDS_IN_DAY * 7)\n  return 1 + Math.floor(weekDiff)\n}\n\nfunction getDayIdentifier (date) {\n  return date.getFullYear() * 10000 + date.getMonth() * 100 + date.getDate()\n}\n\nfunction getDateIdentifier (date, onlyDate /* = false */) {\n  const d = new Date(date)\n  return onlyDate === true ? getDayIdentifier(d) : d.getTime()\n}\n\nexport function isBetweenDates (date, from, to, opts = {}) {\n  const\n    d1 = getDateIdentifier(from, opts.onlyDate),\n    d2 = getDateIdentifier(to, opts.onlyDate),\n    cur = getDateIdentifier(date, opts.onlyDate)\n\n  return (cur > d1 || (opts.inclusiveFrom === true && cur === d1))\n    && (cur < d2 || (opts.inclusiveTo === true && cur === d2))\n}\n\nexport function addToDate (date, mod) {\n  return getChange(date, mod, true)\n}\nexport function subtractFromDate (date, mod) {\n  return getChange(date, mod, false)\n}\n\nexport function adjustDate (date, mod, utc) {\n  const\n    t = new Date(date),\n    prefix = `set${ utc === true ? 'UTC' : '' }`\n\n  Object.keys(mod).forEach(key => {\n    if (key === 'month') {\n      setMonth(t, mod.month)\n      return\n    }\n\n    const op = key === 'year'\n      ? 'FullYear'\n      : key.charAt(0).toUpperCase() + key.slice(1)\n    t[ `${ prefix }${ op }` ](mod[ key ])\n  })\n\n  return t\n}\n\nexport function startOfDate (date, unit, utc) {\n  const\n    t = new Date(date),\n    prefix = `set${ utc === true ? 'UTC' : '' }`\n\n  switch (unit) {\n    case 'year':\n      t[ `${ prefix }Month` ](0)\n    case 'month':\n      t[ `${ prefix }Date` ](1)\n    case 'day':\n      t[ `${ prefix }Hours` ](0)\n    case 'hour':\n      t[ `${ prefix }Minutes` ](0)\n    case 'minute':\n      t[ `${ prefix }Seconds` ](0)\n    case 'second':\n      t[ `${ prefix }Milliseconds` ](0)\n  }\n  return t\n}\n\nexport function endOfDate (date, unit, utc) {\n  const\n    t = new Date(date),\n    prefix = `set${ utc === true ? 'UTC' : '' }`\n\n  switch (unit) {\n    case 'year':\n      t[ `${ prefix }Month` ](11)\n    case 'month':\n      t[ `${ prefix }Date` ](daysInMonth(t))\n    case 'day':\n      t[ `${ prefix }Hours` ](23)\n    case 'hour':\n      t[ `${ prefix }Minutes` ](59)\n    case 'minute':\n      t[ `${ prefix }Seconds` ](59)\n    case 'second':\n      t[ `${ prefix }Milliseconds` ](999)\n  }\n  return t\n}\n\nexport function getMaxDate (date /* , ...args */) {\n  let t = new Date(date)\n  Array.prototype.slice.call(arguments, 1).forEach(d => {\n    t = Math.max(t, new Date(d))\n  })\n  return t\n}\n\nexport function getMinDate (date /*, ...args */) {\n  let t = new Date(date)\n  Array.prototype.slice.call(arguments, 1).forEach(d => {\n    t = Math.min(t, new Date(d))\n  })\n  return t\n}\n\nfunction getDiff (t, sub, interval) {\n  return (\n    (t.getTime() - t.getTimezoneOffset() * MILLISECONDS_IN_MINUTE)\n    - (sub.getTime() - sub.getTimezoneOffset() * MILLISECONDS_IN_MINUTE)\n  ) / interval\n}\n\nexport function getDateDiff (date, subtract, unit = 'days') {\n  const\n    t = new Date(date),\n    sub = new Date(subtract)\n\n  switch (unit) {\n    case 'years':\n      return (t.getFullYear() - sub.getFullYear())\n\n    case 'months':\n      return (t.getFullYear() - sub.getFullYear()) * 12 + t.getMonth() - sub.getMonth()\n\n    case 'days':\n      return getDiff(startOfDate(t, 'day'), startOfDate(sub, 'day'), MILLISECONDS_IN_DAY)\n\n    case 'hours':\n      return getDiff(startOfDate(t, 'hour'), startOfDate(sub, 'hour'), MILLISECONDS_IN_HOUR)\n\n    case 'minutes':\n      return getDiff(startOfDate(t, 'minute'), startOfDate(sub, 'minute'), MILLISECONDS_IN_MINUTE)\n\n    case 'seconds':\n      return getDiff(startOfDate(t, 'second'), startOfDate(sub, 'second'), 1000)\n  }\n}\n\nexport function getDayOfYear (date) {\n  return getDateDiff(date, startOfDate(date, 'year'), 'days') + 1\n}\n\nexport function inferDateFormat (date) {\n  return isDate(date) === true\n    ? 'date'\n    : (typeof date === 'number' ? 'number' : 'string')\n}\n\nexport function getDateBetween (date, min, max) {\n  const t = new Date(date)\n\n  if (min) {\n    const low = new Date(min)\n    if (t < low) {\n      return low\n    }\n  }\n\n  if (max) {\n    const high = new Date(max)\n    if (t > high) {\n      return high\n    }\n  }\n\n  return t\n}\n\nexport function isSameDate (date, date2, unit) {\n  const\n    t = new Date(date),\n    d = new Date(date2)\n\n  if (unit === void 0) {\n    return t.getTime() === d.getTime()\n  }\n\n  switch (unit) {\n    case 'second':\n      if (t.getSeconds() !== d.getSeconds()) {\n        return false\n      }\n    case 'minute': // intentional fall-through\n      if (t.getMinutes() !== d.getMinutes()) {\n        return false\n      }\n    case 'hour': // intentional fall-through\n      if (t.getHours() !== d.getHours()) {\n        return false\n      }\n    case 'day': // intentional fall-through\n      if (t.getDate() !== d.getDate()) {\n        return false\n      }\n    case 'month': // intentional fall-through\n      if (t.getMonth() !== d.getMonth()) {\n        return false\n      }\n    case 'year': // intentional fall-through\n      if (t.getFullYear() !== d.getFullYear()) {\n        return false\n      }\n      break\n    default:\n      throw new Error(`date isSameDate unknown unit ${ unit }`)\n  }\n\n  return true\n}\n\nexport function daysInMonth (date) {\n  return (new Date(date.getFullYear(), date.getMonth() + 1, 0)).getDate()\n}\n\nfunction getOrdinal (n) {\n  if (n >= 11 && n <= 13) {\n    return `${ n }th`\n  }\n  switch (n % 10) {\n    case 1: return `${ n }st`\n    case 2: return `${ n }nd`\n    case 3: return `${ n }rd`\n  }\n  return `${ n }th`\n}\n\nconst formatter = {\n  // Year: 00, 01, ..., 99\n  YY (date, _, forcedYear) {\n    // workaround for < 1900 with new Date()\n    const y = this.YYYY(date, _, forcedYear) % 100\n    return y > 0\n      ? pad(y)\n      : '-' + pad(Math.abs(y))\n  },\n\n  // Year: 1900, 1901, ..., 2099\n  YYYY (date, _, forcedYear) {\n    // workaround for < 1900 with new Date()\n    return forcedYear !== void 0 && forcedYear !== null\n      ? forcedYear\n      : date.getFullYear()\n  },\n\n  // Month: 1, 2, ..., 12\n  M (date) {\n    return date.getMonth() + 1\n  },\n\n  // Month: 01, 02, ..., 12\n  MM (date) {\n    return pad(date.getMonth() + 1)\n  },\n\n  // Month Short Name: Jan, Feb, ...\n  MMM (date, dateLocale) {\n    return dateLocale.monthsShort[ date.getMonth() ]\n  },\n\n  // Month Name: January, February, ...\n  MMMM (date, dateLocale) {\n    return dateLocale.months[ date.getMonth() ]\n  },\n\n  // Quarter: 1, 2, 3, 4\n  Q (date) {\n    return Math.ceil((date.getMonth() + 1) / 3)\n  },\n\n  // Quarter: 1st, 2nd, 3rd, 4th\n  Qo (date) {\n    return getOrdinal(this.Q(date))\n  },\n\n  // Day of month: 1, 2, ..., 31\n  D (date) {\n    return date.getDate()\n  },\n\n  // Day of month: 1st, 2nd, ..., 31st\n  Do (date) {\n    return getOrdinal(date.getDate())\n  },\n\n  // Day of month: 01, 02, ..., 31\n  DD (date) {\n    return pad(date.getDate())\n  },\n\n  // Day of year: 1, 2, ..., 366\n  DDD (date) {\n    return getDayOfYear(date)\n  },\n\n  // Day of year: 001, 002, ..., 366\n  DDDD (date) {\n    return pad(getDayOfYear(date), 3)\n  },\n\n  // Day of week: 0, 1, ..., 6\n  d (date) {\n    return date.getDay()\n  },\n\n  // Day of week: Su, Mo, ...\n  dd (date, dateLocale) {\n    return this.dddd(date, dateLocale).slice(0, 2)\n  },\n\n  // Day of week: Sun, Mon, ...\n  ddd (date, dateLocale) {\n    return dateLocale.daysShort[ date.getDay() ]\n  },\n\n  // Day of week: Sunday, Monday, ...\n  dddd (date, dateLocale) {\n    return dateLocale.days[ date.getDay() ]\n  },\n\n  // Day of ISO week: 1, 2, ..., 7\n  E (date) {\n    return date.getDay() || 7\n  },\n\n  // Week of Year: 1 2 ... 52 53\n  w (date) {\n    return getWeekOfYear(date)\n  },\n\n  // Week of Year: 01 02 ... 52 53\n  ww (date) {\n    return pad(getWeekOfYear(date))\n  },\n\n  // Hour: 0, 1, ... 23\n  H (date) {\n    return date.getHours()\n  },\n\n  // Hour: 00, 01, ..., 23\n  HH (date) {\n    return pad(date.getHours())\n  },\n\n  // Hour: 1, 2, ..., 12\n  h (date) {\n    const hours = date.getHours()\n    if (hours === 0) {\n      return 12\n    }\n    if (hours > 12) {\n      return hours % 12\n    }\n    return hours\n  },\n\n  // Hour: 01, 02, ..., 12\n  hh (date) {\n    return pad(this.h(date))\n  },\n\n  // Minute: 0, 1, ..., 59\n  m (date) {\n    return date.getMinutes()\n  },\n\n  // Minute: 00, 01, ..., 59\n  mm (date) {\n    return pad(date.getMinutes())\n  },\n\n  // Second: 0, 1, ..., 59\n  s (date) {\n    return date.getSeconds()\n  },\n\n  // Second: 00, 01, ..., 59\n  ss (date) {\n    return pad(date.getSeconds())\n  },\n\n  // 1/10 of second: 0, 1, ..., 9\n  S (date) {\n    return Math.floor(date.getMilliseconds() / 100)\n  },\n\n  // 1/100 of second: 00, 01, ..., 99\n  SS (date) {\n    return pad(Math.floor(date.getMilliseconds() / 10))\n  },\n\n  // Millisecond: 000, 001, ..., 999\n  SSS (date) {\n    return pad(date.getMilliseconds(), 3)\n  },\n\n  // Meridiem: AM, PM\n  A (date) {\n    return this.H(date) < 12 ? 'AM' : 'PM'\n  },\n\n  // Meridiem: am, pm\n  a (date) {\n    return this.H(date) < 12 ? 'am' : 'pm'\n  },\n\n  // Meridiem: a.m., p.m.\n  aa (date) {\n    return this.H(date) < 12 ? 'a.m.' : 'p.m.'\n  },\n\n  // Timezone: -01:00, +00:00, ... +12:00\n  Z (date, dateLocale, forcedYear, forcedTimezoneOffset) {\n    const tzOffset = forcedTimezoneOffset === void 0 || forcedTimezoneOffset === null\n      ? date.getTimezoneOffset()\n      : forcedTimezoneOffset\n\n    return formatTimezone(tzOffset, ':')\n  },\n\n  // Timezone: -0100, +0000, ... +1200\n  ZZ (date, dateLocale, forcedYear, forcedTimezoneOffset) {\n    const tzOffset = forcedTimezoneOffset === void 0 || forcedTimezoneOffset === null\n      ? date.getTimezoneOffset()\n      : forcedTimezoneOffset\n\n    return formatTimezone(tzOffset)\n  },\n\n  // Seconds timestamp: 512969520\n  X (date) {\n    return Math.floor(date.getTime() / 1000)\n  },\n\n  // Milliseconds timestamp: 512969520900\n  x (date) {\n    return date.getTime()\n  }\n}\n\nexport function formatDate (val, mask, dateLocale, __forcedYear, __forcedTimezoneOffset) {\n  if (\n    (val !== 0 && !val)\n    || val === Infinity\n    || val === -Infinity\n  ) {\n    return\n  }\n\n  const date = new Date(val)\n\n  if (isNaN(date)) {\n    return\n  }\n\n  if (mask === void 0) {\n    mask = defaultMask\n  }\n\n  const locale = dateLocale !== void 0\n    ? dateLocale\n    : lang.props.date\n\n  return mask.replace(\n    token,\n    (match, text) => (\n      match in formatter\n        ? formatter[ match ](date, locale, __forcedYear, __forcedTimezoneOffset)\n        : (text === void 0 ? match : text.split('\\\\]').join(']'))\n    )\n  )\n}\n\nexport function clone (date) {\n  return isDate(date) === true\n    ? new Date(date.getTime())\n    : date\n}\n\nexport default {\n  isValid,\n  extractDate,\n  buildDate,\n  getDayOfWeek,\n  getWeekOfYear,\n  isBetweenDates,\n  addToDate,\n  subtractFromDate,\n  adjustDate,\n  startOfDate,\n  endOfDate,\n  getMaxDate,\n  getMinDate,\n  getDateDiff,\n  getDayOfYear,\n  inferDateFormat,\n  getDateBetween,\n  isSameDate,\n  daysInMonth,\n  formatDate,\n  clone\n}\n","import { h, defineComponent, ref, computed, watch, Transition, nextTick, getCurrentInstance } from 'vue'\n\nimport QBtn from '../btn/QBtn.js'\n\nimport useDark, { useDarkProps } from '../../composables/private/use-dark.js'\nimport useCache from '../../composables/private/use-cache.js'\nimport { useFormProps, useFormAttrs, useFormInject } from '../../composables/private/use-form.js'\nimport useDatetime, { useDatetimeProps, useDatetimeEmits, getDayHash } from './use-datetime.js'\n\nimport { hSlot } from '../../utils/private/render.js'\nimport { formatDate, __splitDate, getDateDiff } from '../../utils/date.js'\nimport { pad } from '../../utils/format.js'\nimport { jalaaliMonthLength, toGregorian } from '../../utils/private/date-persian.js'\n\nconst yearsInterval = 20\nconst views = [ 'Calendar', 'Years', 'Months' ]\nconst viewIsValid = v => views.includes(v)\nconst yearMonthValidator = v => /^-?[\\d]+\\/[0-1]\\d$/.test(v)\nconst lineStr = ' \\u2014 '\n\nfunction getMonthHash (date) {\n  return date.year + '/' + pad(date.month)\n}\n\nexport default defineComponent({\n  name: 'QDate',\n\n  props: {\n    ...useDatetimeProps,\n    ...useFormProps,\n    ...useDarkProps,\n\n    multiple: Boolean,\n    range: Boolean,\n\n    title: String,\n    subtitle: String,\n\n    mask: {\n      // this mask is forced\n      // when using persian calendar\n      default: 'YYYY/MM/DD'\n    },\n\n    defaultYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n\n    yearsInMonthView: Boolean,\n\n    events: [ Array, Function ],\n    eventColor: [ String, Function ],\n\n    emitImmediately: Boolean,\n\n    options: [ Array, Function ],\n\n    navigationMinYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n\n    navigationMaxYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n\n    noUnset: Boolean,\n\n    firstDayOfWeek: [ String, Number ],\n    todayBtn: Boolean,\n    minimal: Boolean,\n    defaultView: {\n      type: String,\n      default: 'Calendar',\n      validator: viewIsValid\n    }\n  },\n\n  emits: [\n    ...useDatetimeEmits,\n    'range-start', 'range-end', 'navigation'\n  ],\n\n  setup (props, { slots, emit }) {\n    const { proxy } = getCurrentInstance()\n    const { $q } = proxy\n\n    const isDark = useDark(props, $q)\n    const { getCache } = useCache()\n    const { tabindex, headerClass, getLocale, getCurrentDate } = useDatetime(props, $q)\n\n    let lastEmitValue\n\n    const formAttrs = useFormAttrs(props)\n    const injectFormInput = useFormInject(formAttrs)\n\n    const blurTargetRef = ref(null)\n    const innerMask = ref(getMask())\n    const innerLocale = ref(getLocale())\n\n    const mask = computed(() => getMask())\n    const locale = computed(() => getLocale())\n\n    const today = computed(() => getCurrentDate())\n\n    // model of current calendar view:\n    const viewModel = ref(getViewModel(innerMask.value, innerLocale.value))\n\n    const view = ref(props.defaultView)\n\n    const direction = $q.lang.rtl === true ? 'right' : 'left'\n    const monthDirection = ref(direction.value)\n    const yearDirection = ref(direction.value)\n\n    const year = viewModel.value.year\n    const startYear = ref(year - (year % yearsInterval) - (year < 0 ? yearsInterval : 0))\n    const editRange = ref(null)\n\n    const classes = computed(() => {\n      const type = props.landscape === true ? 'landscape' : 'portrait'\n      return `q-date q-date--${ type } q-date--${ type }-${ props.minimal === true ? 'minimal' : 'standard' }`\n        + (isDark.value === true ? ' q-date--dark q-dark' : '')\n        + (props.bordered === true ? ' q-date--bordered' : '')\n        + (props.square === true ? ' q-date--square no-border-radius' : '')\n        + (props.flat === true ? ' q-date--flat no-shadow' : '')\n        + (props.disable === true ? ' disabled' : (props.readonly === true ? ' q-date--readonly' : ''))\n    })\n\n    const computedColor = computed(() => {\n      return props.color || 'primary'\n    })\n\n    const computedTextColor = computed(() => {\n      return props.textColor || 'white'\n    })\n\n    const isImmediate = computed(() =>\n      props.emitImmediately === true\n      && props.multiple !== true\n      && props.range !== true\n    )\n\n    const normalizedModel = computed(() => (\n      Array.isArray(props.modelValue) === true\n        ? props.modelValue\n        : (props.modelValue !== null && props.modelValue !== void 0 ? [ props.modelValue ] : [])\n    ))\n\n    const daysModel = computed(() =>\n      normalizedModel.value\n        .filter(date => typeof date === 'string')\n        .map(date => decodeString(date, innerMask.value, innerLocale.value))\n        .filter(date => date.dateHash !== null)\n    )\n\n    const rangeModel = computed(() => {\n      const fn = date => decodeString(date, innerMask.value, innerLocale.value)\n      return normalizedModel.value\n        .filter(date => Object(date) === date && date.from !== void 0 && date.to !== void 0)\n        .map(range => ({ from: fn(range.from), to: fn(range.to) }))\n        .filter(range => range.from.dateHash !== null && range.to.dateHash !== null && range.from.dateHash < range.to.dateHash)\n    })\n\n    const getNativeDateFn = computed(() => (\n      props.calendar !== 'persian'\n        ? model => new Date(model.year, model.month - 1, model.day)\n        : model => {\n          const gDate = toGregorian(model.year, model.month, model.day)\n          return new Date(gDate.gy, gDate.gm - 1, gDate.gd)\n        }\n    ))\n\n    const encodeObjectFn = computed(() => (\n      props.calendar === 'persian'\n        ? getDayHash\n        : (date, mask, locale) => formatDate(\n            new Date(\n              date.year,\n              date.month - 1,\n              date.day,\n              date.hour,\n              date.minute,\n              date.second,\n              date.millisecond\n            ),\n            mask === void 0 ? innerMask.value : mask,\n            locale === void 0 ? innerLocale.value : locale,\n            date.year,\n            date.timezoneOffset\n          )\n    ))\n\n    const daysInModel = computed(() =>\n      daysModel.value.length + rangeModel.value.reduce(\n        (acc, range) => acc + 1 + getDateDiff(\n          getNativeDateFn.value(range.to),\n          getNativeDateFn.value(range.from)\n        ),\n        0\n      )\n    )\n\n    const headerTitle = computed(() => {\n      if (props.title !== void 0 && props.title !== null && props.title.length > 0) {\n        return props.title\n      }\n\n      if (editRange.value !== null) {\n        const model = editRange.value.init\n        const date = getNativeDateFn.value(model)\n\n        return innerLocale.value.daysShort[ date.getDay() ] + ', '\n          + innerLocale.value.monthsShort[ model.month - 1 ] + ' '\n          + model.day + lineStr + '?'\n      }\n\n      if (daysInModel.value === 0) {\n        return lineStr\n      }\n\n      if (daysInModel.value > 1) {\n        return `${ daysInModel.value } ${ innerLocale.value.pluralDay }`\n      }\n\n      const model = daysModel.value[ 0 ]\n      const date = getNativeDateFn.value(model)\n\n      if (isNaN(date.valueOf()) === true) {\n        return lineStr\n      }\n\n      if (innerLocale.value.headerTitle !== void 0) {\n        return innerLocale.value.headerTitle(date, model)\n      }\n\n      return innerLocale.value.daysShort[ date.getDay() ] + ', '\n        + innerLocale.value.monthsShort[ model.month - 1 ] + ' '\n        + model.day\n    })\n\n    const minSelectedModel = computed(() => {\n      const model = daysModel.value.concat(rangeModel.value.map(range => range.from))\n        .sort((a, b) => a.year - b.year || a.month - b.month)\n\n      return model[ 0 ]\n    })\n\n    const maxSelectedModel = computed(() => {\n      const model = daysModel.value.concat(rangeModel.value.map(range => range.to))\n        .sort((a, b) => b.year - a.year || b.month - a.month)\n\n      return model[ 0 ]\n    })\n\n    const headerSubtitle = computed(() => {\n      if (props.subtitle !== void 0 && props.subtitle !== null && props.subtitle.length > 0) {\n        return props.subtitle\n      }\n\n      if (daysInModel.value === 0) {\n        return lineStr\n      }\n\n      if (daysInModel.value > 1) {\n        const from = minSelectedModel.value\n        const to = maxSelectedModel.value\n        const month = innerLocale.value.monthsShort\n\n        return month[ from.month - 1 ] + (\n          from.year !== to.year\n            ? ' ' + from.year + lineStr + month[ to.month - 1 ] + ' '\n            : (\n                from.month !== to.month\n                  ? lineStr + month[ to.month - 1 ]\n                  : ''\n              )\n        ) + ' ' + to.year\n      }\n\n      return daysModel.value[ 0 ].year\n    })\n\n    const dateArrow = computed(() => {\n      const val = [ $q.iconSet.datetime.arrowLeft, $q.iconSet.datetime.arrowRight ]\n      return $q.lang.rtl === true ? val.reverse() : val\n    })\n\n    const computedFirstDayOfWeek = computed(() => (\n      props.firstDayOfWeek !== void 0\n        ? Number(props.firstDayOfWeek)\n        : innerLocale.value.firstDayOfWeek\n    ))\n\n    const daysOfWeek = computed(() => {\n      const\n        days = innerLocale.value.daysShort,\n        first = computedFirstDayOfWeek.value\n\n      return first > 0\n        ? days.slice(first, 7).concat(days.slice(0, first))\n        : days\n    })\n\n    const daysInMonth = computed(() => {\n      const date = viewModel.value\n      return props.calendar !== 'persian'\n        ? (new Date(date.year, date.month, 0)).getDate()\n        : jalaaliMonthLength(date.year, date.month)\n    })\n\n    const evtColor = computed(() => (\n      typeof props.eventColor === 'function'\n        ? props.eventColor\n        : () => props.eventColor\n    ))\n\n    const minNav = computed(() => {\n      if (props.navigationMinYearMonth === void 0) {\n        return null\n      }\n\n      const data = props.navigationMinYearMonth.split('/')\n      return { year: parseInt(data[ 0 ], 10), month: parseInt(data[ 1 ], 10) }\n    })\n\n    const maxNav = computed(() => {\n      if (props.navigationMaxYearMonth === void 0) {\n        return null\n      }\n\n      const data = props.navigationMaxYearMonth.split('/')\n      return { year: parseInt(data[ 0 ], 10), month: parseInt(data[ 1 ], 10) }\n    })\n\n    const navBoundaries = computed(() => {\n      const data = {\n        month: { prev: true, next: true },\n        year: { prev: true, next: true }\n      }\n\n      if (minNav.value !== null && minNav.value.year >= viewModel.value.year) {\n        data.year.prev = false\n        if (minNav.value.year === viewModel.value.year && minNav.value.month >= viewModel.value.month) {\n          data.month.prev = false\n        }\n      }\n\n      if (maxNav.value !== null && maxNav.value.year <= viewModel.value.year) {\n        data.year.next = false\n        if (maxNav.value.year === viewModel.value.year && maxNav.value.month <= viewModel.value.month) {\n          data.month.next = false\n        }\n      }\n\n      return data\n    })\n\n    const daysMap = computed(() => {\n      const map = {}\n\n      daysModel.value.forEach(entry => {\n        const hash = getMonthHash(entry)\n\n        if (map[ hash ] === void 0) {\n          map[ hash ] = []\n        }\n\n        map[ hash ].push(entry.day)\n      })\n\n      return map\n    })\n\n    const rangeMap = computed(() => {\n      const map = {}\n\n      rangeModel.value.forEach(entry => {\n        const hashFrom = getMonthHash(entry.from)\n        const hashTo = getMonthHash(entry.to)\n\n        if (map[ hashFrom ] === void 0) {\n          map[ hashFrom ] = []\n        }\n\n        map[ hashFrom ].push({\n          from: entry.from.day,\n          to: hashFrom === hashTo ? entry.to.day : void 0,\n          range: entry\n        })\n\n        if (hashFrom < hashTo) {\n          let hash\n          const { year, month } = entry.from\n          const cur = month < 12\n            ? { year, month: month + 1 }\n            : { year: year + 1, month: 1 }\n\n          while ((hash = getMonthHash(cur)) <= hashTo) {\n            if (map[ hash ] === void 0) {\n              map[ hash ] = []\n            }\n\n            map[ hash ].push({\n              from: void 0,\n              to: hash === hashTo ? entry.to.day : void 0,\n              range: entry\n            })\n\n            cur.month++\n            if (cur.month > 12) {\n              cur.year++\n              cur.month = 1\n            }\n          }\n        }\n      })\n\n      return map\n    })\n\n    const rangeView = computed(() => {\n      if (editRange.value === null) {\n        return\n      }\n\n      const { init, initHash, final, finalHash } = editRange.value\n\n      const [ from, to ] = initHash <= finalHash\n        ? [ init, final ]\n        : [ final, init ]\n\n      const fromHash = getMonthHash(from)\n      const toHash = getMonthHash(to)\n\n      if (fromHash !== viewMonthHash.value && toHash !== viewMonthHash.value) {\n        return\n      }\n\n      const view = {}\n\n      if (fromHash === viewMonthHash.value) {\n        view.from = from.day\n        view.includeFrom = true\n      }\n      else {\n        view.from = 1\n      }\n\n      if (toHash === viewMonthHash.value) {\n        view.to = to.day\n        view.includeTo = true\n      }\n      else {\n        view.to = daysInMonth.value\n      }\n\n      return view\n    })\n\n    const viewMonthHash = computed(() => getMonthHash(viewModel.value))\n\n    const selectionDaysMap = computed(() => {\n      const map = {}\n\n      if (props.options === void 0) {\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          map[ i ] = true\n        }\n\n        return map\n      }\n\n      const fn = typeof props.options === 'function'\n        ? props.options\n        : date => props.options.includes(date)\n\n      for (let i = 1; i <= daysInMonth.value; i++) {\n        const dayHash = viewMonthHash.value + '/' + pad(i)\n        map[ i ] = fn(dayHash)\n      }\n\n      return map\n    })\n\n    const eventDaysMap = computed(() => {\n      const map = {}\n\n      if (props.events === void 0) {\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          map[ i ] = false\n        }\n      }\n      else {\n        const fn = typeof props.events === 'function'\n          ? props.events\n          : date => props.events.includes(date)\n\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          const dayHash = viewMonthHash.value + '/' + pad(i)\n          map[ i ] = fn(dayHash) === true && evtColor.value(dayHash)\n        }\n      }\n\n      return map\n    })\n\n    const viewDays = computed(() => {\n      let date, endDay\n      const { year, month } = viewModel.value\n\n      if (props.calendar !== 'persian') {\n        date = new Date(year, month - 1, 1)\n        endDay = (new Date(year, month - 1, 0)).getDate()\n      }\n      else {\n        const gDate = toGregorian(year, month, 1)\n        date = new Date(gDate.gy, gDate.gm - 1, gDate.gd)\n        let prevJM = month - 1\n        let prevJY = year\n        if (prevJM === 0) {\n          prevJM = 12\n          prevJY--\n        }\n        endDay = jalaaliMonthLength(prevJY, prevJM)\n      }\n\n      return {\n        days: date.getDay() - computedFirstDayOfWeek.value - 1,\n        endDay\n      }\n    })\n\n    const days = computed(() => {\n      const res = []\n      const { days, endDay } = viewDays.value\n\n      const len = days < 0 ? days + 7 : days\n      if (len < 6) {\n        for (let i = endDay - len; i <= endDay; i++) {\n          res.push({ i, fill: true })\n        }\n      }\n\n      const index = res.length\n\n      for (let i = 1; i <= daysInMonth.value; i++) {\n        const day = { i, event: eventDaysMap.value[ i ], classes: [] }\n\n        if (selectionDaysMap.value[ i ] === true) {\n          day.in = true\n          day.flat = true\n        }\n\n        res.push(day)\n      }\n\n      // if current view has days in model\n      if (daysMap.value[ viewMonthHash.value ] !== void 0) {\n        daysMap.value[ viewMonthHash.value ].forEach(day => {\n          const i = index + day - 1\n          Object.assign(res[ i ], {\n            selected: true,\n            unelevated: true,\n            flat: false,\n            color: computedColor.value,\n            textColor: computedTextColor.value\n          })\n        })\n      }\n\n      // if current view has ranges in model\n      if (rangeMap.value[ viewMonthHash.value ] !== void 0) {\n        rangeMap.value[ viewMonthHash.value ].forEach(entry => {\n          if (entry.from !== void 0) {\n            const from = index + entry.from - 1\n            const to = index + (entry.to || daysInMonth.value) - 1\n\n            for (let day = from; day <= to; day++) {\n              Object.assign(res[ day ], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              })\n            }\n\n            Object.assign(res[ from ], {\n              rangeFrom: true,\n              flat: false\n            })\n\n            entry.to !== void 0 && Object.assign(res[ to ], {\n              rangeTo: true,\n              flat: false\n            })\n          }\n          else if (entry.to !== void 0) {\n            const to = index + entry.to - 1\n\n            for (let day = index; day <= to; day++) {\n              Object.assign(res[ day ], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              })\n            }\n\n            Object.assign(res[ to ], {\n              flat: false,\n              rangeTo: true\n            })\n          }\n          else {\n            const to = index + daysInMonth.value - 1\n            for (let day = index; day <= to; day++) {\n              Object.assign(res[ day ], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              })\n            }\n          }\n        })\n      }\n\n      if (rangeView.value !== void 0) {\n        const from = index + rangeView.value.from - 1\n        const to = index + rangeView.value.to - 1\n\n        for (let day = from; day <= to; day++) {\n          res[ day ].color = computedColor.value\n          res[ day ].editRange = true\n        }\n\n        if (rangeView.value.includeFrom === true) {\n          res[ from ].editRangeFrom = true\n        }\n        if (rangeView.value.includeTo === true) {\n          res[ to ].editRangeTo = true\n        }\n      }\n\n      if (viewModel.value.year === today.value.year && viewModel.value.month === today.value.month) {\n        res[ index + today.value.day - 1 ].today = true\n      }\n\n      const left = res.length % 7\n      if (left > 0) {\n        const afterDays = 7 - left\n        for (let i = 1; i <= afterDays; i++) {\n          res.push({ i, fill: true })\n        }\n      }\n\n      res.forEach(day => {\n        let cls = 'q-date__calendar-item '\n\n        if (day.fill === true) {\n          cls += 'q-date__calendar-item--fill'\n        }\n        else {\n          cls += `q-date__calendar-item--${ day.in === true ? 'in' : 'out' }`\n\n          if (day.range !== void 0) {\n            cls += ` q-date__range${ day.rangeTo === true ? '-to' : (day.rangeFrom === true ? '-from' : '') }`\n          }\n\n          if (day.editRange === true) {\n            cls += ` q-date__edit-range${ day.editRangeFrom === true ? '-from' : '' }${ day.editRangeTo === true ? '-to' : '' }`\n          }\n\n          if (day.range !== void 0 || day.editRange === true) {\n            cls += ` text-${ day.color }`\n          }\n        }\n\n        day.classes = cls\n      })\n\n      return res\n    })\n\n    const attributes = computed(() => (\n      props.disable === true\n        ? { 'aria-disabled': 'true' }\n        : (props.readonly === true ? { 'aria-readonly': 'true' } : {})\n    ))\n\n    watch(() => props.modelValue, v => {\n      if (lastEmitValue === v) {\n        lastEmitValue = 0\n      }\n      else {\n        const { year, month } = getViewModel(innerMask.value, innerLocale.value)\n        updateViewModel(year, month)\n      }\n    })\n\n    watch(view, () => {\n      blurTargetRef.value !== null && blurTargetRef.value.focus()\n    })\n\n    watch(() => viewModel.value.year, year => {\n      emit('navigation', { year, month: viewModel.value.month })\n    })\n\n    watch(() => viewModel.value.month, month => {\n      emit('navigation', { year: viewModel.value.year, month })\n    })\n\n    watch(mask, val => {\n      updateValue(val, innerLocale.value, 'mask')\n      innerMask.value = val\n    })\n\n    watch(locale, val => {\n      updateValue(innerMask.value, val, 'locale')\n      innerLocale.value = val\n    })\n\n    function setToday () {\n      toggleDate(today.value, getMonthHash(today.value))\n      setCalendarTo(today.value.year, today.value.month)\n    }\n\n    function setView (viewMode) {\n      if (viewIsValid(viewMode) === true) {\n        view.value = viewMode\n      }\n    }\n\n    function offsetCalendar (type, descending) {\n      if ([ 'month', 'year' ].includes(type)) {\n        const fn = type === 'month' ? goToMonth : goToYear\n        fn(descending === true ? -1 : 1)\n      }\n    }\n\n    function setCalendarTo (year, month) {\n      view.value = 'Calendar'\n      updateViewModel(year, month)\n    }\n\n    function setEditingRange (from, to) {\n      if (props.range === false || !from) {\n        editRange.value = null\n        return\n      }\n\n      const init = Object.assign({ ...viewModel.value }, from)\n      const final = to !== void 0\n        ? Object.assign({ ...viewModel.value }, to)\n        : init\n\n      editRange.value = {\n        init,\n        initHash: getDayHash(init),\n        final,\n        finalHash: getDayHash(final)\n      }\n\n      setCalendarTo(init.year, init.month)\n    }\n\n    function getMask () {\n      return props.calendar === 'persian' ? 'YYYY/MM/DD' : props.mask\n    }\n\n    function decodeString (date, mask, locale) {\n      return __splitDate(\n        date,\n        mask,\n        locale,\n        props.calendar,\n        {\n          hour: 0,\n          minute: 0,\n          second: 0,\n          millisecond: 0\n        }\n      )\n    }\n\n    function getViewModel (mask, locale) {\n      const model = Array.isArray(props.modelValue) === true\n        ? props.modelValue\n        : (props.modelValue ? [ props.modelValue ] : [])\n\n      if (model.length === 0) {\n        return getDefaultViewModel()\n      }\n\n      const decoded = decodeString(\n        model[ 0 ].from !== void 0 ? model[ 0 ].from : model[ 0 ],\n        mask,\n        locale\n      )\n\n      return decoded.dateHash === null\n        ? getDefaultViewModel()\n        : decoded\n    }\n\n    function getDefaultViewModel () {\n      let year, month\n\n      if (props.defaultYearMonth !== void 0) {\n        const d = props.defaultYearMonth.split('/')\n        year = parseInt(d[ 0 ], 10)\n        month = parseInt(d[ 1 ], 10)\n      }\n      else {\n        // may come from data() where computed\n        // props are not yet available\n        const d = today.value !== void 0\n          ? today.value\n          : getCurrentDate()\n\n        year = d.year\n        month = d.month\n      }\n\n      return {\n        year,\n        month,\n        day: 1,\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0,\n        dateHash: year + '/' + pad(month) + '/01'\n      }\n    }\n\n    function goToMonth (offset) {\n      let year = viewModel.value.year\n      let month = Number(viewModel.value.month) + offset\n\n      if (month === 13) {\n        month = 1\n        year++\n      }\n      else if (month === 0) {\n        month = 12\n        year--\n      }\n\n      updateViewModel(year, month)\n      isImmediate.value === true && emitImmediately('month')\n    }\n\n    function goToYear (offset) {\n      const year = Number(viewModel.value.year) + offset\n      updateViewModel(year, viewModel.value.month)\n      isImmediate.value === true && emitImmediately('year')\n    }\n\n    function setYear (year) {\n      updateViewModel(year, viewModel.value.month)\n      view.value = props.defaultView === 'Years' ? 'Months' : 'Calendar'\n      isImmediate.value === true && emitImmediately('year')\n    }\n\n    function setMonth (month) {\n      updateViewModel(viewModel.value.year, month)\n      view.value = 'Calendar'\n      isImmediate.value === true && emitImmediately('month')\n    }\n\n    function toggleDate (date, monthHash) {\n      const month = daysMap.value[ monthHash ]\n      const fn = month !== void 0 && month.includes(date.day) === true\n        ? removeFromModel\n        : addToModel\n\n      fn(date)\n    }\n\n    function getShortDate (date) {\n      return { year: date.year, month: date.month, day: date.day }\n    }\n\n    function updateViewModel (year, month) {\n      if (minNav.value !== null && year <= minNav.value.year) {\n        year = minNav.value.year\n        if (month < minNav.value.month) {\n          month = minNav.value.month\n        }\n      }\n\n      if (maxNav.value !== null && year >= maxNav.value.year) {\n        year = maxNav.value.year\n        if (month > maxNav.value.month) {\n          month = maxNav.value.month\n        }\n      }\n\n      const newHash = year + '/' + pad(month) + '/01'\n\n      if (newHash !== viewModel.value.dateHash) {\n        monthDirection.value = (viewModel.value.dateHash < newHash) === ($q.lang.rtl !== true) ? 'left' : 'right'\n        if (year !== viewModel.value.year) {\n          yearDirection.value = monthDirection.value\n        }\n\n        nextTick(() => {\n          startYear.value = year - year % yearsInterval - (year < 0 ? yearsInterval : 0)\n          Object.assign(viewModel.value, {\n            year,\n            month,\n            day: 1,\n            dateHash: newHash\n          })\n        })\n      }\n    }\n\n    function emitValue (val, action, date) {\n      const value = val !== null && val.length === 1 && props.multiple === false\n        ? val[ 0 ]\n        : val\n\n      lastEmitValue = value\n\n      const { reason, details } = getEmitParams(action, date)\n      emit('update:modelValue', value, reason, details)\n    }\n\n    function emitImmediately (reason) {\n      const date = daysModel.value[ 0 ] !== void 0 && daysModel.value[ 0 ].dateHash !== null\n        ? { ...daysModel.value[ 0 ] }\n        : { ...viewModel.value } // inherit day, hours, minutes, milliseconds...\n\n      // nextTick required because of animation delay in viewModel\n      nextTick(() => {\n        date.year = viewModel.value.year\n        date.month = viewModel.value.month\n\n        const maxDay = props.calendar !== 'persian'\n          ? (new Date(date.year, date.month, 0)).getDate()\n          : jalaaliMonthLength(date.year, date.month)\n\n        date.day = Math.min(Math.max(1, date.day), maxDay)\n\n        const value = encodeEntry(date)\n        lastEmitValue = value\n\n        const { details } = getEmitParams('', date)\n        emit('update:modelValue', value, reason, details)\n      })\n    }\n\n    function getEmitParams (action, date) {\n      return date.from !== void 0\n        ? {\n            reason: `${ action }-range`,\n            details: {\n              ...getShortDate(date.target),\n              from: getShortDate(date.from),\n              to: getShortDate(date.to)\n            }\n          }\n        : {\n            reason: `${ action }-day`,\n            details: getShortDate(date)\n          }\n    }\n\n    function encodeEntry (date, mask, locale) {\n      return date.from !== void 0\n        ? { from: encodeObjectFn.value(date.from, mask, locale), to: encodeObjectFn.value(date.to, mask, locale) }\n        : encodeObjectFn.value(date, mask, locale)\n    }\n\n    function addToModel (date) {\n      let value\n\n      if (props.multiple === true) {\n        if (date.from !== void 0) {\n          // we also need to filter out intersections\n\n          const fromHash = getDayHash(date.from)\n          const toHash = getDayHash(date.to)\n\n          const days = daysModel.value\n            .filter(day => day.dateHash < fromHash || day.dateHash > toHash)\n\n          const ranges = rangeModel.value\n            .filter(({ from, to }) => to.dateHash < fromHash || from.dateHash > toHash)\n\n          value = days.concat(ranges).concat(date).map(entry => encodeEntry(entry))\n        }\n        else {\n          const model = normalizedModel.value.slice()\n          model.push(encodeEntry(date))\n          value = model\n        }\n      }\n      else {\n        value = encodeEntry(date)\n      }\n\n      emitValue(value, 'add', date)\n    }\n\n    function removeFromModel (date) {\n      if (props.noUnset === true) {\n        return\n      }\n\n      let model = null\n\n      if (props.multiple === true && Array.isArray(props.modelValue) === true) {\n        const val = encodeEntry(date)\n\n        if (date.from !== void 0) {\n          model = props.modelValue.filter(\n            date => (\n              date.from !== void 0\n                ? (date.from !== val.from && date.to !== val.to)\n                : true\n            )\n          )\n        }\n        else {\n          model = props.modelValue.filter(date => date !== val)\n        }\n\n        if (model.length === 0) {\n          model = null\n        }\n      }\n\n      emitValue(model, 'remove', date)\n    }\n\n    function updateValue (mask, locale, reason) {\n      const model = daysModel.value\n        .concat(rangeModel.value)\n        .map(entry => encodeEntry(entry, mask, locale))\n        .filter(entry => {\n          return entry.from !== void 0\n            ? entry.from.dateHash !== null && entry.to.dateHash !== null\n            : entry.dateHash !== null\n        })\n\n      emit('update:modelValue', (props.multiple === true ? model : model[ 0 ]) || null, reason)\n    }\n\n    // expose public methods\n    Object.assign(proxy, {\n      setToday, setView, offsetCalendar, setCalendarTo, setEditingRange\n    })\n\n    function getHeader () {\n      if (props.minimal === true) { return }\n\n      return h('div', {\n        class: 'q-date__header ' + headerClass.value\n      }, [\n        h('div', {\n          class: 'relative-position'\n        }, [\n          h(Transition, {\n            name: 'q-transition--fade'\n          }, () => h('div', {\n            key: 'h-yr-' + headerSubtitle.value,\n            class: 'q-date__header-subtitle q-date__header-link '\n              + (view.value === 'Years' ? 'q-date__header-link--active' : 'cursor-pointer'),\n            tabindex: tabindex.value,\n            ...getCache('vY', {\n              onClick () { view.value = 'Years' },\n              onKeyup (e) { e.keyCode === 13 && (view.value = 'Years') }\n            })\n          }, [ headerSubtitle.value ]))\n        ]),\n\n        h('div', {\n          class: 'q-date__header-title relative-position flex no-wrap'\n        }, [\n          h('div', {\n            class: 'relative-position col'\n          }, [\n            h(Transition, {\n              name: 'q-transition--fade'\n            }, () => h('div', {\n              key: 'h-sub' + headerTitle.value,\n              class: 'q-date__header-title-label q-date__header-link '\n                + (view.value === 'Calendar' ? 'q-date__header-link--active' : 'cursor-pointer'),\n              tabindex: tabindex.value,\n              ...getCache('vC', {\n                onClick () { view.value = 'Calendar' },\n                onKeyup (e) { e.keyCode === 13 && (view.value = 'Calendar') }\n              })\n            }, [ headerTitle.value ]))\n          ]),\n\n          props.todayBtn === true ? h(QBtn, {\n            class: 'q-date__header-today self-start',\n            icon: $q.iconSet.datetime.today,\n            flat: true,\n            size: 'sm',\n            round: true,\n            tabindex: tabindex.value,\n            onClick: setToday\n          }) : null\n        ])\n      ])\n    }\n\n    function getNavigation ({ label, type, key, dir, goTo, boundaries, cls }) {\n      return [\n        h('div', {\n          class: 'row items-center q-date__arrow'\n        }, [\n          h(QBtn, {\n            round: true,\n            dense: true,\n            size: 'sm',\n            flat: true,\n            icon: dateArrow.value[ 0 ],\n            tabindex: tabindex.value,\n            disable: boundaries.prev === false,\n            ...getCache('go-#' + type, { onClick () { goTo(-1) } })\n          })\n        ]),\n\n        h('div', {\n          class: 'relative-position overflow-hidden flex flex-center' + cls\n        }, [\n          h(Transition, {\n            name: 'q-transition--jump-' + dir\n          }, () => h('div', { key }, [\n            h(QBtn, {\n              flat: true,\n              dense: true,\n              noCaps: true,\n              label,\n              tabindex: tabindex.value,\n              ...getCache('view#' + type, { onClick: () => { view.value = type } })\n            })\n          ]))\n        ]),\n\n        h('div', {\n          class: 'row items-center q-date__arrow'\n        }, [\n          h(QBtn, {\n            round: true,\n            dense: true,\n            size: 'sm',\n            flat: true,\n            icon: dateArrow.value[ 1 ],\n            tabindex: tabindex.value,\n            disable: boundaries.next === false,\n            ...getCache('go+#' + type, { onClick () { goTo(1) } })\n          })\n        ])\n      ]\n    }\n\n    const renderViews = {\n      Calendar: () => ([\n        h('div', {\n          key: 'calendar-view',\n          class: 'q-date__view q-date__calendar'\n        }, [\n          h('div', {\n            class: 'q-date__navigation row items-center no-wrap'\n          }, getNavigation({\n            label: innerLocale.value.months[ viewModel.value.month - 1 ],\n            type: 'Months',\n            key: viewModel.value.month,\n            dir: monthDirection.value,\n            goTo: goToMonth,\n            boundaries: navBoundaries.value.month,\n            cls: ' col'\n          }).concat(getNavigation({\n            label: viewModel.value.year,\n            type: 'Years',\n            key: viewModel.value.year,\n            dir: yearDirection.value,\n            goTo: goToYear,\n            boundaries: navBoundaries.value.year,\n            cls: ''\n          }))),\n\n          h('div', {\n            class: 'q-date__calendar-weekdays row items-center no-wrap'\n          }, daysOfWeek.value.map(day => h('div', { class: 'q-date__calendar-item' }, [ h('div', day) ]))),\n\n          h('div', {\n            class: 'q-date__calendar-days-container relative-position overflow-hidden'\n          }, [\n            h(Transition, {\n              name: 'q-transition--slide-' + monthDirection.value\n            }, () => h('div', {\n              key: viewMonthHash.value,\n              class: 'q-date__calendar-days fit'\n            }, days.value.map(day => h('div', { class: day.classes }, [\n              day.in === true\n                ? h(\n                    QBtn, {\n                      class: day.today === true ? 'q-date__today' : '',\n                      dense: true,\n                      flat: day.flat,\n                      unelevated: day.unelevated,\n                      color: day.color,\n                      textColor: day.textColor,\n                      label: day.i,\n                      tabindex: tabindex.value,\n                      ...getCache('day#' + day.i, {\n                        onClick: () => { onDayClick(day.i) },\n                        onMouseover: () => { onDayMouseover(day.i) }\n                      })\n                    },\n                    day.event !== false\n                      ? () => h('div', { class: 'q-date__event bg-' + day.event })\n                      : null\n                  )\n                : h('div', '' + day.i)\n            ]))))\n          ])\n        ])\n      ]),\n\n      Months () {\n        const currentYear = viewModel.value.year === today.value.year\n        const isDisabled = month => {\n          return (\n            (minNav.value !== null && viewModel.value.year === minNav.value.year && minNav.value.month > month)\n            || (maxNav.value !== null && viewModel.value.year === maxNav.value.year && maxNav.value.month < month)\n          )\n        }\n\n        const content = innerLocale.value.monthsShort.map((month, i) => {\n          const active = viewModel.value.month === i + 1\n\n          return h('div', {\n            class: 'q-date__months-item flex flex-center'\n          }, [\n            h(QBtn, {\n              class: currentYear === true && today.value.month === i + 1 ? 'q-date__today' : null,\n              flat: active !== true,\n              label: month,\n              unelevated: active,\n              color: active === true ? computedColor.value : null,\n              textColor: active === true ? computedTextColor.value : null,\n              tabindex: tabindex.value,\n              disable: isDisabled(i + 1),\n              ...getCache('month#' + i, { onClick: () => { setMonth(i + 1) } })\n            })\n          ])\n        })\n\n        props.yearsInMonthView === true && content.unshift(\n          h('div', { class: 'row no-wrap full-width' }, [\n            getNavigation({\n              label: viewModel.value.year,\n              type: 'Years',\n              key: viewModel.value.year,\n              dir: yearDirection.value,\n              goTo: goToYear,\n              boundaries: navBoundaries.value.year,\n              cls: ' col'\n            })\n          ])\n        )\n\n        return h('div', {\n          key: 'months-view',\n          class: 'q-date__view q-date__months flex flex-center'\n        }, content)\n      },\n\n      Years () {\n        const\n          start = startYear.value,\n          stop = start + yearsInterval,\n          years = []\n\n        const isDisabled = year => {\n          return (\n            (minNav.value !== null && minNav.value.year > year)\n            || (maxNav.value !== null && maxNav.value.year < year)\n          )\n        }\n\n        for (let i = start; i <= stop; i++) {\n          const active = viewModel.value.year === i\n\n          years.push(\n            h('div', {\n              class: 'q-date__years-item flex flex-center'\n            }, [\n              h(QBtn, {\n                key: 'yr' + i,\n                class: today.value.year === i ? 'q-date__today' : null,\n                flat: !active,\n                label: i,\n                dense: true,\n                unelevated: active,\n                color: active === true ? computedColor.value : null,\n                textColor: active === true ? computedTextColor.value : null,\n                tabindex: tabindex.value,\n                disable: isDisabled(i),\n                ...getCache('yr#' + i, { onClick: () => { setYear(i) } })\n              })\n            ])\n          )\n        }\n\n        return h('div', {\n          class: 'q-date__view q-date__years flex flex-center'\n        }, [\n          h('div', {\n            class: 'col-auto'\n          }, [\n            h(QBtn, {\n              round: true,\n              dense: true,\n              flat: true,\n              icon: dateArrow.value[ 0 ],\n              tabindex: tabindex.value,\n              disable: isDisabled(start),\n              ...getCache('y-', { onClick: () => { startYear.value -= yearsInterval } })\n            })\n          ]),\n\n          h('div', {\n            class: 'q-date__years-content col self-stretch row items-center'\n          }, years),\n\n          h('div', {\n            class: 'col-auto'\n          }, [\n            h(QBtn, {\n              round: true,\n              dense: true,\n              flat: true,\n              icon: dateArrow.value[ 1 ],\n              tabindex: tabindex.value,\n              disable: isDisabled(stop),\n              ...getCache('y+', { onClick: () => { startYear.value += yearsInterval } })\n            })\n          ])\n        ])\n      }\n    }\n\n    function onDayClick (dayIndex) {\n      const day = { ...viewModel.value, day: dayIndex }\n\n      if (props.range === false) {\n        toggleDate(day, viewMonthHash.value)\n        return\n      }\n\n      if (editRange.value === null) {\n        const dayProps = days.value.find(day => day.fill !== true && day.i === dayIndex)\n\n        if (dayProps.range !== void 0) {\n          removeFromModel({ target: day, from: dayProps.range.from, to: dayProps.range.to })\n          return\n        }\n\n        if (dayProps.selected === true) {\n          removeFromModel(day)\n          return\n        }\n\n        const initHash = getDayHash(day)\n\n        editRange.value = {\n          init: day,\n          initHash,\n          final: day,\n          finalHash: initHash\n        }\n\n        emit('range-start', getShortDate(day))\n      }\n      else {\n        const\n          initHash = editRange.value.initHash,\n          finalHash = getDayHash(day),\n          payload = initHash <= finalHash\n            ? { from: editRange.value.init, to: day }\n            : { from: day, to: editRange.value.init }\n\n        editRange.value = null\n        addToModel(initHash === finalHash ? day : { target: day, ...payload })\n\n        emit('range-end', {\n          from: getShortDate(payload.from),\n          to: getShortDate(payload.to)\n        })\n      }\n    }\n\n    function onDayMouseover (dayIndex) {\n      if (editRange.value !== null) {\n        const final = { ...viewModel.value, day: dayIndex }\n\n        Object.assign(editRange.value, {\n          final,\n          finalHash: getDayHash(final)\n        })\n      }\n    }\n\n    return () => {\n      const content = [\n        h('div', {\n          class: 'q-date__content col relative-position'\n        }, [\n          h(Transition, {\n            name: 'q-transition--fade'\n          }, renderViews[ view.value ])\n        ])\n      ]\n\n      const def = hSlot(slots.default)\n      def !== void 0 && content.push(\n        h('div', { class: 'q-date__actions' }, def)\n      )\n\n      if (props.name !== void 0 && props.disable !== true) {\n        injectFormInput(content, 'push')\n      }\n\n      return h('div', {\n        class: classes.value,\n        ...attributes.value\n      }, [\n        getHeader(),\n\n        h('div', {\n          ref: blurTargetRef,\n          class: 'q-date__main col column',\n          tabindex: -1\n        }, content)\n      ])\n    }\n  }\n})\n","import { h, defineComponent, ref, computed, watch, getCurrentInstance } from 'vue'\n\nimport QDialog from '../dialog/QDialog.js'\nimport QMenu from '../menu/QMenu.js'\n\nimport useAnchor, { useAnchorProps } from '../../composables/private/use-anchor.js'\nimport { hSlot } from '../../utils/private/render.js'\n\nexport default defineComponent({\n  name: 'QPopupProxy',\n\n  props: {\n    ...useAnchorProps,\n\n    breakpoint: {\n      type: [ String, Number ],\n      default: 450\n    }\n  },\n\n  emits: [ 'show', 'hide' ],\n\n  setup (props, { slots, emit, attrs }) {\n    const { proxy } = getCurrentInstance()\n    const { $q } = proxy\n\n    const showing = ref(false)\n    const popupRef = ref(null)\n    const breakpoint = computed(() => parseInt(props.breakpoint, 10))\n\n    const { canShow } = useAnchor({ showing })\n\n    function getType () {\n      return $q.screen.width < breakpoint.value || $q.screen.height < breakpoint.value\n        ? 'dialog'\n        : 'menu'\n    }\n\n    const type = ref(getType())\n\n    watch(() => getType(), val => {\n      if (showing.value !== true) {\n        type.value = val\n      }\n    })\n\n    // expose public methods\n    Object.assign(proxy, {\n      show (evt) { canShow(evt) === true && popupRef.value.show(evt) },\n      hide (evt) { popupRef.value.hide(evt) },\n      toggle (evt) { popupRef.value.toggle(evt) }\n    })\n\n    function onShow (evt) {\n      showing.value = true\n      emit('show', evt)\n    }\n\n    function onHide (evt) {\n      showing.value = false\n      type.value = getType()\n      emit('hide', evt)\n    }\n\n    return () => {\n      const def = hSlot(slots.default)\n\n      const popupProps = (\n        type.value === 'menu'\n        && def !== void 0\n        && def[ 0 ] !== void 0\n        && def[ 0 ].type !== void 0\n        && [ 'QDate', 'QTime', 'QCarousel', 'QColor' ].includes(\n          def[ 0 ].type.name\n        )\n      ) ? { cover: true, maxHeight: '99vh' } : {}\n\n      const data = {\n        ref: popupRef,\n        ...popupProps,\n        ...attrs,\n        onShow,\n        onHide\n      }\n\n      let component\n\n      if (type.value === 'dialog') {\n        component = QDialog\n      }\n      else {\n        component = QMenu\n        Object.assign(data, {\n          target: props.target,\n          contextMenu: props.contextMenu,\n          noParentEvent: true,\n          separateClosePopup: true\n        })\n      }\n\n      return h(component, data, () => def)\n    }\n  }\n})\n","import { closePortals, getPortalVm } from '../utils/private/portal.js'\nimport { isKeyCode } from '../utils/private/key-composition.js'\nimport getSSRProps from '../utils/private/noop-ssr-directive-transform.js'\n\n/*\n * depth\n *   < 0  --> close all chain\n *   0    --> disabled\n *   > 0  --> close chain up to N parent\n */\n\nfunction getDepth (value) {\n  if (value === false) {\n    return 0\n  }\n  if (value === true || value === void 0) {\n    return 1\n  }\n\n  const depth = parseInt(value, 10)\n  return isNaN(depth) ? 0 : depth\n}\n\nexport default __QUASAR_SSR_SERVER__\n  ? { name: 'close-popup', getSSRProps }\n  : {\n      name: 'close-popup',\n\n      beforeMount (el, { value }) {\n        const ctx = {\n          depth: getDepth(value),\n\n          handler (evt) {\n            // allow @click to be emitted\n            ctx.depth !== 0 && setTimeout(() => {\n              const vm = getPortalVm(el)\n              if (vm !== void 0) {\n                closePortals(vm, evt, ctx.depth)\n              }\n            })\n          },\n\n          handlerKey (evt) {\n            isKeyCode(evt, 13) === true && ctx.handler(evt)\n          }\n        }\n\n        el.__qclosepopup = ctx\n\n        el.addEventListener('click', ctx.handler)\n        el.addEventListener('keyup', ctx.handlerKey)\n      },\n\n      updated (el, { value, oldValue }) {\n        if (value !== oldValue) {\n          el.__qclosepopup.depth = getDepth(value)\n        }\n      },\n\n      beforeUnmount (el) {\n        const ctx = el.__qclosepopup\n        el.removeEventListener('click', ctx.handler)\n        el.removeEventListener('keyup', ctx.handlerKey)\n        delete el.__qclosepopup\n      }\n    }\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n"],"sourceRoot":""}